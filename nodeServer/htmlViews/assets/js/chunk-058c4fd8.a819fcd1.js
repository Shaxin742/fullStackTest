(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-058c4fd8"],{"1f63":function(e,t,a){},"4f01":function(e,t,a){"use strict";var i=a("1f63"),o=a.n(i);o.a},"579d":function(e,t,a){"use strict";a("99af");var i=a("5530"),o=a("53ca"),s=a("b85c"),l=a("2f62"),r=a("0644"),n=a.n(r);function c(e,t){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=Object(s["a"])(e);try{for(l.s();!(a=l.n()).done;){var r=a.value,c=t[r];c&&("object"===Object(o["a"])(c)?i[r]=n()(c):i[r]=c)}}catch(u){l.e(u)}finally{l.f()}return i}t["a"]=function(e,t,a){return{computed:{moduleName:function(){return"".concat(this.$route.path).concat(t?"_"+t:"")},cacheParams:function(){return this.$store.state.dataCache.params[this.moduleName]}},methods:Object(i["a"])(Object(i["a"])({},Object(l["d"])(["SET_CACHE_PARAMS"])),{},{cacheParamData:function(){this.SET_CACHE_PARAMS({moduleName:this.moduleName,params:c(e,this)})},recoveryDataParams:function(){this.cacheParams&&(c(e,this.cacheParams,this),a||this.SET_CACHE_PARAMS({moduleName:this.moduleName}))}}),created:function(){this.recoveryDataParams()}}}},"99d0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view-data-manage"},[a("base-panel",{attrs:{title:"数据视图管理"}},[a("template",{slot:"title-right"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("div",[a("el-button",{staticClass:"icon_button"},[a("span",[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"add-line"}}),e._v("新增")],1)])],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"dataBase"}},[e._v("数据库型")]),a("el-dropdown-item",{attrs:{command:"httpService"}},[e._v("http服务型")]),a("el-dropdown-item",{attrs:{command:"fileType"}},[e._v("文件型")]),a("el-dropdown-item",{attrs:{command:"customType"}},[e._v("自定义型")])],1)],1),a("el-button",{staticClass:"icon_button",staticStyle:{"margin-left":"10px"},on:{click:e.gotolink}},[a("span",[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"link-line"}}),e._v("连接器管理")],1)])],1),a("div",{staticClass:"operate-left"},[a("el-form",{staticClass:"operate-left-form",attrs:{inline:!0,"label-suffix":" :",size:"mini"}},[a("el-form-item",{attrs:{label:"视图名称"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入视图名称"},model:{value:e.viewName,callback:function(t){e.viewName=t},expression:"viewName"}})],1),a("el-form-item",{attrs:{label:"视图类型"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择视图类型"},model:{value:e.viewType,callback:function(t){e.viewType=t},expression:"viewType"}},e._l(e.viewTypeData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"字段名称"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入字段名称"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("搜索")]),a("el-button",{on:{click:e.cancelData}},[e._v("重置")])],1)],1)],1),a("base-table",{staticClass:"sortTable noTableBorder",attrs:{border:"","data-source":e.viewData,loading:e.loading,height:360,columns:e.columns(),"has-pagination":"","show-summary":!1,total:e.total,"current-page":e.page,"page-size":e.limit,"border-style":!0,"can-edit":""},on:{handleCurrent:e.handleCurrent,handleSize:e.handleSize}})],2),a("simple-dialog",{attrs:{"dialog-title":"修改","dialog-visible":e.dialogVisibleData,"dialog-width":"300px","botton-show":"true","cancel-text":"取消","save-text":"确定"},on:{saveEmit:e.setDetermines,cancelEmit:e.cancelDialog}},[a("el-radio",{attrs:{label:"0"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("兼容性")]),a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("非兼容性")])],1)],1)},o=[],s=a("d4ec"),l=a("bee2"),r=a("262e"),n=a("2caf"),c=a("9ab4"),u=a("60a3"),d=a("cb9b"),p=a("ca00"),h=a("579d");u["a"].registerHooks(["beforeRouteLeave"]);var m=Object(h["a"])(["viewName","viewType","fieldName","viewData","total","limit","page"]),v=function(e){Object(r["a"])(a,e);var t=Object(n["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.viewData=[],e.viewTypeData=[{text:"数据库型",value:0},{text:"http服务型",value:1},{text:"文件型",value:2},{text:"自定义型",value:3}],e.viewStateData=[{text:"未启用",value:1},{text:"已启用",value:0},{text:"已过期",value:2},{text:"已停用",value:3}],e.viewName="",e.viewType="",e.copy=!1,e.fieldName="",e.loading=!1,e.page=1,e.limit=10,e.total=0,e.compatibleId="",e.compatible=0,e.dialogVisibleData=!1,e.radio="0",e}return Object(l["a"])(a,[{key:"columns",value:function(){var e=this;return[{prop:"",type:"index",align:"center",label:"序号",width:"60"},{prop:"name",label:"视图名称","header-align":"left",showOverflowTooltip:!0,"min-width":"100"},{prop:"type",label:"视图类型","header-align":"left",showOverflowTooltip:!0,"min-width":"120",formatter:e.viewTypeFormatter},{prop:"status",label:"视图状态","header-align":"left",showOverflowTooltip:!0,"min-width":"80",formatter:e.viewStatusFormatter},{prop:"",align:"center",label:"操作",width:"290",headerAlign:"center",actions:[{code:"startUsing",text:"启用",hidden:e.startShow,onClick:function(t){return e.startBtn(t,0)}},{code:"pastDue",text:"过期",hidden:e.stopShow,onClick:function(t){return e.startBtn(t,2)}},{code:"blockUp",text:"停用",hidden:e.blockShow,onClick:function(t){return e.startBtn(t,3)}},{code:"edit",text:"修改",disabled:e.editDisabled,onClick:e.editBook},{code:"preview",text:"详情",onClick:e.previewBook},{code:"edit",text:"复制",onClick:e.copyBook},{code:"delete",text:"删除",disabled:e.deleteDisabled,onClick:e.delBook}]}]}},{key:"startShow",value:function(e){return 1!==e.status}},{key:"stopShow",value:function(e){return 0!==e.status}},{key:"blockShow",value:function(e){return 2!==e.status}},{key:"startBtn",value:function(e,t){var a=this;Object(d["q"])(e.id,t).then((function(e){var t=e.error;t?(a.getViewDataList(),a.$message.error("状态转换失败："+t.message)):(a.$message({type:"success",message:"状态转换成功!"}),a.getViewDataList())}))}},{key:"editDisabled",value:function(e){if(2===e.status)return!0}},{key:"updateData",value:function(){this.page=1,this.getViewDataList()}},{key:"cancelData",value:function(){this.viewName="",this.viewType="",this.fieldName="",this.getViewDataList()}},{key:"deleteDisabled",value:function(e){if(1!==e.status)return!0}},{key:"gotolink",value:function(){this.$router.push("/sysSupport/dataService/connector")}},{key:"handleCommand",value:function(e){this[e].call()}},{key:"dataBase",value:function(){this.$router.push("/sysSupport/dataService/dataBaseView")}},{key:"httpService",value:function(){this.$router.push("/sysSupport/dataService/httpView")}},{key:"fileType",value:function(){this.$router.push("/sysSupport/dataService/fileView")}},{key:"customType",value:function(){this.$router.push("/sysSupport/dataService/customView")}},{key:"editBook",value:function(e){this.compatible=e.type,this.compatibleId=e.id,this.dialogVisibleData=!0}},{key:"cancelDialog",value:function(){this.dialogVisibleData=!1}},{key:"setDetermines",value:function(){0===this.compatible?!0===this.copy?this.$router.push({path:"/sysSupport/dataService/dataBaseView",query:{id:this.compatibleId,isCompatible:"3"}}):this.$router.push({path:"/sysSupport/dataService/dataBaseView",query:{id:this.compatibleId,isCompatible:this.radio}}):1===this.compatible?!0===this.copy?this.$router.push({path:"/sysSupport/dataService/httpView",query:{id:this.compatibleId,isCompatible:"3"}}):this.$router.push({path:"/sysSupport/dataService/httpView",query:{id:this.compatibleId,isCompatible:this.radio}}):2===this.compatible?!0===this.copy?this.$router.push({path:"/sysSupport/dataService/fileView",query:{id:this.compatibleId,isCompatible:"3"}}):this.$router.push({path:"/sysSupport/dataService/fileView",query:{id:this.compatibleId,isCompatible:this.radio}}):3===this.compatible&&(!0===this.copy?this.$router.push({path:"/sysSupport/dataService/customView",query:{id:this.compatibleId,isCompatible:"3"}}):this.$router.push({path:"/sysSupport/dataService/customView",query:{id:this.compatibleId,isCompatible:this.radio}}))}},{key:"copyBook",value:function(e){this.copy=!0,this.compatible=e.type,this.compatibleId=e.id,this.setDetermines()}},{key:"delBook",value:function(e){var t=this,a={id:e.id};this.$confirm("您确定要删除这条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["i"])(a).then((function(e){var a=e.error;a?t.$message.error("删除失败: "+a.message):(t.$message({type:"success",message:"删除成功!"}),t.getViewDataList())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},{key:"previewBook",value:function(e){this.$router.push({path:"/sysSupport/dataService/detailData",query:{id:e.id}})}},{key:"viewTypeFormatter",value:function(e,t,a){return Object(p["a"])(this.viewTypeData,"value",a).text}},{key:"viewStatusFormatter",value:function(e,t,a){return Object(p["a"])(this.viewStateData,"value",a)?Object(p["a"])(this.viewStateData,"value",a).text:""}},{key:"handleSize",value:function(e){this.limit=e,this.page=1,this.getViewDataList()}},{key:"handleCurrent",value:function(e){this.page=e,this.getViewDataList()}},{key:"getViewDataList",value:function(){var e=this;this.loading=!0;var t={type:"0",limit:this.limit,page:this.page,name:this.viewName,kind:"".concat(this.viewType),fieldName:this.fieldName};Object(d["u"])(t).then((function(t){var a=t.data,i=t.error;i||(a.rows&&(e.viewData=a.rows),e.total=a.total,e.loading=!1)}))}},{key:"created",value:function(){!this.viewData.length&&this.getViewDataList()}},{key:"beforeRouteLeave",value:function(e,t,a){this.cacheParamData(),a()}}]),a}(u["e"]);v=Object(c["a"])([Object(u["a"])({components:{},mixins:[m]})],v);var f=v,b=f,y=(a("4f01"),a("2877")),w=Object(y["a"])(b,i,o,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-058c4fd8.a819fcd1.js.map