{"version":3,"sources":["webpack:///./src/views/viewDateManagent/httpView.vue?ba7b","webpack:///./src/views/viewDateManagent/httpView.vue","webpack:///./src/views/viewDateManagent/httpView.vue?f2af","webpack:///./src/views/viewDateManagent/httpView.vue?f20d","webpack:///./src/views/viewDateManagent/httpView.vue?7860"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","actions","ref","staticClass","form","rulesForm","model","callback","$$v","$set","on","connectFrom","_l","item","key","id","newDialog","_v","subTypeVal","_e","label","paramsActions","listData","isCompatible","dataDictionary","editTree","testChange","productTreeData","staticStyle","_s","textResult","dialogVisibleBool","saveDialog","cancelDialog","dialogSwitch","treeDataTest","cancelSwitch","staticRenderFns","testloading","updateId","serverConnectList","httpMethods","viewName","required","message","trigger","serverConnect","pathAsk","askMethod","reqModel","conRules","conName","conType","address","validator","rule","webRegs","restRegs","connector","test","Error","status","rightText","code","type","defaultValue","edits","addButton","_this","icon","onClick","dataViewAddSure","title","$router","back","treeDialog","$route","query","dataViewDetail","linkListData","then","data","path","linkId","methodName","dictFlag","queryParams","cl","fields","forEach","foreignFieldCode","treeCode","page","limit","error","$message","rows","linkData","dialogClose","spreadQuery","i","$refs","advance","push","treeTestData","success","result","JSON","parse","Base64","decode","jsonSchema","structureData","treeHandle","resultList","fieldCode","length","$confirm","confirmButtonText","cancelButtonText","catch","handleData","dataArr","items","properties","fieldName","fieldType","description","children","isPrimaryKey","listForm","validate","valid","listCode","some","console","log","formList","treeData","treeLists","checkFlag","parameViewTable","viewList","kind","respCodes","viewData","resetFields","val","subType","components","testEditor","treeTableList","parameView","createDialog","component"],"mappings":"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","file":"assets/js/chunk-64952ecb.a774c4b1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('base-panel',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.testloading),expression:\"testloading\"}],attrs:{\"title\":\"新增http服务类型数据视图\",\"actions\":_vm.actions()}},[_c('el-form',{ref:\"form\",staticClass:\"formDataHorizontal formCss labelSuffix\",attrs:{\"model\":_vm.form,\"label-position\":\"left\",\"label-suffix\":\"：\",\"label-width\":\"100px\",\"rules\":_vm.rulesForm}},[_c('el-form-item',{attrs:{\"label\":\"视图名称\",\"prop\":\"viewName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入视图名称\"},model:{value:(_vm.form.viewName),callback:function ($$v) {_vm.$set(_vm.form, \"viewName\", $$v)},expression:\"form.viewName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"服务连接器\",\"prop\":\"serverConnect\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择服务连接器\"},on:{\"change\":_vm.connectFrom},model:{value:(_vm.form.serverConnect),callback:function ($$v) {_vm.$set(_vm.form, \"serverConnect\", $$v)},expression:\"form.serverConnect\"}},_vm._l((_vm.serverConnectList),function(item){return _c('el-option',{key:item.name,attrs:{\"label\":item.name,\"value\":item.id}})}),1),_c('el-button',{staticClass:\"create_button\",attrs:{\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.newDialog}},[_vm._v(\"新增\")])],1),(_vm.subTypeVal !== 1)?_c('el-form-item',{attrs:{\"label\":\"请求path\",\"prop\":\"pathAsk\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入请求path\"},model:{value:(_vm.form.pathAsk),callback:function ($$v) {_vm.$set(_vm.form, \"pathAsk\", $$v)},expression:\"form.pathAsk\"}})],1):_vm._e(),(_vm.subTypeVal !== 1)?_c('el-form-item',{attrs:{\"label\":\"请求方式\",\"prop\":\"reqModel\"}},[_c('el-select',{model:{value:(_vm.form.reqModel),callback:function ($$v) {_vm.$set(_vm.form, \"reqModel\", $$v)},expression:\"form.reqModel\"}},_vm._l((_vm.httpMethods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.subTypeVal !== 0)?_c('el-form-item',{attrs:{\"label\":\"请求方法名\",\"prop\":\"askMethod\"}},[_c('el-input',{model:{value:(_vm.form.askMethod),callback:function ($$v) {_vm.$set(_vm.form, \"askMethod\", $$v)},expression:\"form.askMethod\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"数据字典\",\"prop\":\"dataDictionary\"}},[_c('el-switch',{attrs:{\"active-value\":0,\"inactive-value\":1},model:{value:(_vm.form.dataDictionary),callback:function ($$v) {_vm.$set(_vm.form, \"dataDictionary\", $$v)},expression:\"form.dataDictionary\"}})],1)],1),_c('simple-card',{attrs:{\"actions\":_vm.paramsActions(),\"title\":\"参数列表\"}},[_c('parameView',{ref:\"parameViewTable\",attrs:{\"parameter-data\":_vm.listData,\"is-compatible\":_vm.isCompatible,\"dictFlag\":_vm.form.dataDictionary}})],1),_c('simple-card',{attrs:{\"title\":\"字段列表\"}},[_c('treeTableList',{ref:\"treeLists\",attrs:{\"edit-tree\":_vm.editTree,\"testChange\":_vm.testChange,\"isCompatible\":_vm.isCompatible,\"data-list\":_vm.productTreeData,\"has-tree\":true}})],1),_c('simple-card',{attrs:{\"title\":\"报文内容预览\"}},[_c('pre',{staticStyle:{\"width\":\"100%\",\"height\":\"200px\",\"border\":\"1px solid #E1E4EB\",\"background\":\"#F5F6FA\",\"overflow\":\"auto\",\"border-radius\":\"2px\"}},[_vm._v(_vm._s(_vm.textResult))])])],1),_c('createDialog',{attrs:{\"dialog-title\":\"新建服务连接器\",\"dialog-visible\":_vm.dialogVisibleBool,\"dialog-width\":\"600px\",\"botton-show\":\"true\",\"type\":\"1\",\"save-text\":\"保存\",\"cancel-text\":\"取消\"},on:{\"saveEmit\":_vm.saveDialog,\"cancelEmit\":_vm.cancelDialog}}),_c('testEditor',{ref:\"advance\",attrs:{\"dialog-test-switch\":_vm.dialogSwitch,\"params-list\":_vm.listData},on:{\"saveEmitSwitch\":_vm.treeDataTest,\"cancelEmitSwitch\":_vm.cancelSwitch}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Vue, Component } from 'vue-property-decorator';\r\nimport { cloneDeep } from 'lodash';\r\nimport testEditor from './component/editTest.vue';\r\nimport createDialog from './component/createDialog.vue';\r\nimport treeTableList from './component/treeTableList.vue';\r\nimport { statementChange } from './component/conditional.js';\r\nimport parameView from './component/parameView.vue';\r\nimport {\r\n  treeHttp,\r\n  addCombin,\r\n  dataViewDetail,\r\n  linkList,\r\n  viewDataEdit,\r\n  dataViewAdd\r\n} from '@api/viewData';\r\nimport Base64 from '@utils/Base64';\r\n@Component({\r\n  components: { testEditor, treeTableList, parameView, createDialog }\r\n})\r\nexport default class PushServiceIndex extends Vue {\r\n  subTypeVal = 0;\r\n  testloading = false;\r\n  editTree: Array<any> = [];\r\n  updateId: any = '';\r\n  testChange = false;\r\n  serverConnectList: Array<any> = [];\r\n  httpMethods: Array<any> = [\r\n    {\r\n      label: 'GET',\r\n      value: 1\r\n    },\r\n    {\r\n      label: 'POST',\r\n      value: 0\r\n    }\r\n  ];\r\n  rulesForm: any = {\r\n    viewName: {\r\n      required: true,\r\n      message: '请输入视图名称',\r\n      trigger: 'blur'\r\n    },\r\n    serverConnect: {\r\n      required: true,\r\n      message: '请选择服务连接器',\r\n      trigger: 'change'\r\n    },\r\n    pathAsk: {\r\n      required: true,\r\n      message: '请输入请求path',\r\n      trigger: 'blur'\r\n    },\r\n    askMethod: {\r\n      required: true,\r\n      message: '请求方法名',\r\n      trigger: 'blur'\r\n    },\r\n    reqModel: {\r\n      required: true,\r\n      message: '请求方式',\r\n      trigger: 'blur'\r\n    }\r\n  };\r\n  conRules: any = {\r\n    conName: {\r\n      required: true,\r\n      message: '请输入连接器名称',\r\n      trigger: 'blur'\r\n    },\r\n    conType: {\r\n      required: true,\r\n      message: '请选择连接器类型',\r\n      trigger: 'change'\r\n    },\r\n    address: {\r\n      required: true,\r\n      validator: (rule: any, value: any, callback: any) => {\r\n        const webRegs = /\\?wsdl$/;\r\n        const restRegs = /((\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]):([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-4]\\d{4}|65[0-4]\\d{2}|655[0-2]\\d|6553[0-5])$)|(^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$)/;\r\n        if (!value) {\r\n          return callback(new Error('请输入服务器地址'));\r\n        } else {\r\n          if (this.connector.conType === '1') {\r\n            if (!webRegs.test(value)) {\r\n              return callback(new Error(\"请输入以'?wsdl'结尾服务器地址\"));\r\n            } else {\r\n              return callback();\r\n            }\r\n          } else if (this.connector.conType === '0') {\r\n            if (!restRegs.test(value)) {\r\n              return callback(\r\n                new Error('注意服务地址只应该包括IP+端口号或者域名')\r\n              );\r\n            } else {\r\n              return callback();\r\n            }\r\n          } else {\r\n            return callback(new Error('请先选择连接器类型'));\r\n          }\r\n        }\r\n      },\r\n      trigger: 'blur'\r\n    }\r\n  };\r\n  dialogSwitch = false;\r\n  productTreeData: Array<any> = [];\r\n  form: any = {\r\n    viewName: '',\r\n    pathAsk: '',\r\n    reqModel: 0,\r\n    serverConnect: '',\r\n    askMethod: '',\r\n    dataDictionary: false\r\n  };\r\n  connector: any = {\r\n    conName: '',\r\n    conType: '',\r\n    address: '',\r\n    status: ''\r\n  };\r\n  isCompatible: any = '';\r\n  textResult: any = '';\r\n  rightText = '关闭';\r\n  dialogVisibleBool = false;\r\n  actions() {\r\n    const _this = this;\r\n    return [\r\n      {\r\n        icon: '',\r\n        onClick: _this.dataViewAddSure,\r\n        type: 'primary',\r\n        title: '确定'\r\n      },\r\n      {\r\n        icon: '',\r\n        onClick: () => {\r\n          _this.$router.back();\r\n        },\r\n        type: 'button',\r\n        title: '取消'\r\n      }\r\n    ];\r\n  }\r\n\r\n  listData: Array<any> = [\r\n    {\r\n      id: 1,\r\n      code: '',\r\n      name: '',\r\n      type: '',\r\n      required: '',\r\n      defaultValue: '',\r\n      edits: [0, 1, 1, 1, 1, 1, 0],\r\n      addButton: true\r\n    }\r\n  ];\r\n  paramsActions() {\r\n    const _this = this;\r\n    return [\r\n      {\r\n        title: '测试查询',\r\n        icon: 'stack-line',\r\n        onClick: _this.treeDialog\r\n      }\r\n    ];\r\n  }\r\n  created() {\r\n    if (this.$route.query.id) {\r\n      this.dataViewDetail();\r\n    }\r\n    this.linkListData();\r\n  }\r\n  // 数据视图详情接口\r\n  dataViewDetail() {\r\n    this.isCompatible = this.$route.query.isCompatible;\r\n    this.updateId = this.$route.query.id;\r\n    const id = this.$route.query.id;\r\n    dataViewDetail(id).then(({ data }) => {\r\n      this.form.viewName = data.name;\r\n      this.form.pathAsk = data.path;\r\n      this.form.reqModel = data.reqModel;\r\n      this.form.serverConnect = data.linkId;\r\n      this.form.askMethod = data.methodName;\r\n      this.form.dataDictionary = data.dictFlag;\r\n      if (data.queryParams) {\r\n        this.listData = data.queryParams;\r\n      }\r\n      const cl: any = cloneDeep(data.fields);\r\n      cl.forEach((item) => {\r\n        if (item.foreignFieldCode) {\r\n          item.treeCode = true;\r\n        }\r\n      });\r\n      this.editTree = cl;\r\n      this.productTreeData = data.fields;\r\n    });\r\n  }\r\n  newDialog() {\r\n    this.dialogVisibleBool = true;\r\n  }\r\n  linkListData() {\r\n    const linkListData = {\r\n      page: 1,\r\n      limit: 10000,\r\n      type: '1',\r\n      name: ''\r\n    };\r\n    linkList(linkListData).then((data) => {\r\n      if (data.error) {\r\n        this.$message.error(data.error.message);\r\n      } else {\r\n        this.serverConnectList = data.data.rows;\r\n      }\r\n    });\r\n  }\r\n  // 连接器新增\r\n  saveDialog(linkData) {\r\n    addCombin(linkData).then((data) => {\r\n      if (data.error) {\r\n        this.$message.error(data.error.message);\r\n      } else {\r\n        this.dialogVisibleBool = false;\r\n        this.cancelDialog();\r\n        // 下拉框请求接口\r\n        this.linkListData();\r\n      }\r\n    });\r\n  }\r\n  cancelDialog() {\r\n    this.dialogVisibleBool = false;\r\n  }\r\n  treeDataTest(dialogClose: string) {\r\n    this.testloading = true;\r\n    let spreadQuery: Array<any> = [];\r\n    if (dialogClose !== 'dialogClose') {\r\n      this.dialogSwitch = false;\r\n      for (const i in this.$refs.advance['spread'].model) {\r\n        spreadQuery.push({\r\n          code: i,\r\n          value: this.$refs.advance['spread'].model[i]\r\n        });\r\n      }\r\n    } else {\r\n      spreadQuery = [];\r\n    }\r\n    const treeTestData = {\r\n      path: this.form.pathAsk,\r\n      reqModel: this.form.reqModel,\r\n      methodName: this.form.askMethod,\r\n      linkId: this.form.serverConnect,\r\n      type: 1,\r\n      queryParams: spreadQuery\r\n    };\r\n    treeHttp(treeTestData).then((data) => {\r\n      this.$message.success('测试查询成功');\r\n      if (data.error) {\r\n        this.testloading = false;\r\n        this.$message.error(data.error.message);\r\n      } else {\r\n        if (data.data.result) {\r\n          this.textResult = JSON.parse(Base64.decode(data.data.result));\r\n        } else {\r\n          this.textResult = data.data.result;\r\n        }\r\n        if (data.data.jsonSchema) {\r\n          const structureData = this.treeHandle(data.data.jsonSchema);\r\n          this.productTreeData = structureData;\r\n          this.test(structureData);\r\n        } else {\r\n          this.productTreeData = data.data.jsonSchema;\r\n        }\r\n      }\r\n      this.testloading = false;\r\n    });\r\n  }\r\n  test(structureData) {\r\n    const resultList: any = [];\r\n    structureData.forEach((item) => {\r\n      this.editTree.forEach((key) => {\r\n        if (item.fieldCode !== key.fieldCode) {\r\n          resultList.push(item.fieldCode);\r\n        }\r\n      });\r\n    });\r\n    if (resultList.length > 0) {\r\n      this.$confirm('是否保留测试查询之前的字段列表数据?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          this.productTreeData = structureData;\r\n        })\r\n        .catch(() => {\r\n          this.testChange = true;\r\n          this.productTreeData = structureData;\r\n        });\r\n    }\r\n  }\r\n  treeHandle(handleData: any) {\r\n    const dataArr: Array<any> = [];\r\n    if (handleData.type && handleData.type === 'array') {\r\n      if (handleData.items) {\r\n        dataArr.push(...this.treeHandle(handleData.items));\r\n      }\r\n    } else {\r\n      for (const i in handleData.properties) {\r\n        if (handleData.properties[i].type === 'object') {\r\n          dataArr.push({\r\n            fieldCode: i,\r\n            fieldName: '',\r\n            fieldType: '',\r\n            type: handleData.properties[i].type,\r\n            description: handleData.properties[i].description,\r\n            children: this.treeHandle(handleData.properties[i])\r\n          });\r\n        } else if (handleData.properties[i].type === 'array') {\r\n          if (handleData.properties[i].items) {\r\n            dataArr.push({\r\n              fieldCode: i,\r\n              fieldName: '',\r\n              fieldType: '',\r\n              isPrimaryKey: 1,\r\n              type: handleData.properties[i].type,\r\n              description: handleData.properties[i].description,\r\n              children: [\r\n                {\r\n                  fieldCode: 'items',\r\n                  fieldName: '',\r\n                  fieldType: '',\r\n                  isPrimaryKey: 1,\r\n                  type: handleData.properties[i].items.type,\r\n                  description: handleData.properties[i].items.description,\r\n                  children: this.treeHandle(handleData.properties[i].items)\r\n                }\r\n              ]\r\n            });\r\n          }\r\n        } else {\r\n          dataArr.push({\r\n            fieldCode: i,\r\n            fieldName: '',\r\n            fieldType: '',\r\n            isPrimaryKey: 1,\r\n            type: handleData.properties[i].type,\r\n            description: handleData.properties[i].description,\r\n            children: []\r\n          });\r\n        }\r\n      }\r\n    }\r\n    return dataArr;\r\n  }\r\n  treeDialog() {\r\n    const listForm: any = this.$refs['form'];\r\n    listForm.validate((valid: any) => {\r\n      if (valid) {\r\n        if (this.listData.length === 0) {\r\n          this.treeDataTest('dialogClose');\r\n        } else {\r\n          const listCode = this.listData.some((item) => {\r\n            if (item.code) {\r\n              return true;\r\n            }\r\n          });\r\n          if (listCode) {\r\n            this.dialogSwitch = true;\r\n          } else {\r\n            this.treeDataTest('dialogClose');\r\n          }\r\n        }\r\n      } else {\r\n        this.$message.error('请先完成基本信息输入！');\r\n      }\r\n    });\r\n  }\r\n  cancelSwitch() {\r\n    this.$refs.advance['spread'].model = '';\r\n    this.dialogSwitch = false;\r\n  }\r\n  dataViewAddSure() {\r\n    console.log(' this.listData', this.listData);\r\n    const formList: any = this.$refs['form'];\r\n    const treeData: any = this.$refs.treeLists['treeDataList'];\r\n    formList.validate((valid: any) => {\r\n      let checkFlag = false;\r\n      if (valid) {\r\n        this.productTreeData = treeData;\r\n        console.log(' this.listData', this.listData);\r\n        this.listData = this.$refs.parameViewTable['parameterData'];\r\n        checkFlag = statementChange(this.listData, this.productTreeData);\r\n        console.log('checkFlag', checkFlag);\r\n        if (checkFlag === false) {\r\n          const viewList: any = {\r\n            name: this.form.viewName,\r\n            kind: 1,\r\n            type: 0,\r\n            dictFlag: this.form.dataDictionary,\r\n            linkId: this.form.serverConnect,\r\n            path: this.form.pathAsk,\r\n            reqModel: this.form.reqModel,\r\n            methodName: this.form.askMethod,\r\n            fields: this.productTreeData,\r\n            respCodes: []\r\n          };\r\n          if (this.listData.length > 0 && this.listData[0].code) {\r\n            viewList.queryParams = this.listData;\r\n          } else {\r\n            viewList.queryParams = [];\r\n          }\r\n          if (\r\n            (this.isCompatible === '0' && this.updateId) ||\r\n            (this.isCompatible === '1' && this.updateId)\r\n          ) {\r\n            viewList.id = this.updateId;\r\n            viewList.isCompatible = this.isCompatible;\r\n            viewDataEdit(viewList).then((data) => {\r\n              formList.resetFields();\r\n              if (data.error) {\r\n                this.$message.error(data.error.message);\r\n              } else {\r\n                this.$message.success('修改http服务型数据视图成功');\r\n                // 跳转页面\r\n                this.$router.back();\r\n              }\r\n            });\r\n          } else {\r\n            dataViewAdd(viewList).then((data) => {\r\n              formList.resetFields();\r\n              if (data.error) {\r\n                this.$message.error(data.error.message);\r\n              } else {\r\n                this.$message.success('新增http服务型数据视图成功');\r\n                // 跳转页面\r\n                this.$router.back();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n  connectFrom(val: number) {\r\n    this.serverConnectList.forEach((items) => {\r\n      if (items.id === val) {\r\n        this.subTypeVal = items.subType;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./httpView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./httpView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./httpView.vue?vue&type=template&id=46e7d541&scoped=true&\"\nimport script from \"./httpView.vue?vue&type=script&lang=ts&\"\nexport * from \"./httpView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./httpView.vue?vue&type=style&index=0&id=46e7d541&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46e7d541\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./httpView.vue?vue&type=style&index=0&id=46e7d541&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./httpView.vue?vue&type=style&index=0&id=46e7d541&lang=scss&scoped=true&\""],"sourceRoot":""}