(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-051a4130"],{"0b1b":function(t,e,a){},"22d5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-table-panel",{staticClass:"sortTable noTableBorder",attrs:{title:"岗位管理","right-btns":t.titleBtns(),"data-source":t.tableData,loading:t.loading,columns:t.columns(),"show-summary":!1,total:t.total,"has-pagination":"","current-page":t.page,"page-size":t.limit,"border-style":!0},on:{handleCurrent:t.handleCurrentChange,handleSize:t.handlePageSizeChange}},[a("template",{slot:"operate-left"},[a("el-form",{staticClass:"operate-left-form",attrs:{inline:!0,"label-suffix":":",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入要搜索的内容","suffix-icon":"el-icon-search",clearable:""},on:{blur:t.keySearch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keySearch(e)}},model:{value:t.inputSearch,callback:function(e){t.inputSearch=e},expression:"inputSearch"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.keySearch}},[t._v("查询")])],1)],1)],1)],2)],1)},i=[],r=(a("b0c0"),a("5530")),o=a("2f62"),s=a("579d"),c=a("fd85"),l=Object(s["a"])(["tableData","page","limit","total","inputSearch"]),u={name:"UserGroupManage",mixins:[l],data:function(){return{inputSearch:"",page:1,limit:10,total:null,tableData:[],loading:!1,users:{},titleBtns:function(){var t=this;return[{title:"手工同步",icon:"refresh-line",code:"sync",onClick:t.handleLoad},{title:"新增岗位",icon:"add-line",code:"add",onClick:t.addUserGroup}]},columns:function(){var t=this,e={"001":"员工岗","002":"业务组长岗","003":"业务主管岗","004":"部门行政负责人","005":"系统管理员"};return[{prop:"name",label:"岗位名称","header-align":"left",showOverflowTooltip:!0,"min-width":"200"},{prop:"groupNature",label:"岗位性质","header-align":"left",showOverflowTooltip:!0,"min-width":"200",render:function(t,a){return t("span",e[a.record.groupNature])}},{prop:"parentName",label:"上级岗位","header-align":"left",showOverflowTooltip:!0,"min-width":"200"},{prop:"",label:"操作",align:"center",width:"140",actions:[{code:"edit",text:"编辑",onClick:t.editUserGroup},{code:"del",text:"删除",onClick:t.del}]}]}}},created:function(){this.freshManagement?this.getStationList(1):!this.tableData.length&&this.getStationList()},computed:Object(r["a"])({},Object(o["c"])(["freshManagement"])),beforeRouteLeave:function(t,e,a){this.cacheParamData(),a()},methods:{handleLoad:function(){var t=this;this.$confirm("确定要同步岗位信息到本系统吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){Object(c["y"])().then((function(e){var a=e.error;a?t.$notify.error({title:"操作失败",message:a.message}):(t.$notify.success({title:"操作成功",message:"岗位信息刷新成功"}),t.getStationList())})).catch((function(e){t.$message.error("同步岗位信息失败！"),console.log(e)}))}))},keySearch:function(){this.page=1,this.getStationList()},getStationList:function(t){var e=this;t&&(this.page=1),this.loading=!0;var a={page:this.page,limit:this.limit};this.inputSearch&&""!==this.inputSearch&&(a.name=this.inputSearch),Object(c["A"])(a).then((function(t){var a=t.data;e.loading=!1,a&&(e.tableData=a.rows,e.total=a.total)}))},handleCurrentChange:function(t){this.page=t,this.getStationList()},handlePageSizeChange:function(t){this.limit=t,this.page=1,this.getStationList()},del:function(t){var e=this;this.$confirm("确定要删除该岗位?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){Object(c["v"])(t.id).then((function(t){var a=t.error;a?e.$message.error(a.message):(e.$message.success("岗位删除成功"),e.getStationList())}))}))},changeMananement:function(){this.page=1,this.getStationList()},addUserGroup:function(){this.routerToDetail("0")},editUserGroup:function(t){this.routerToDetail("1",t.id)},routerToDetail:function(t,e){this.cacheParamData(),this.$router.push({name:"postDetail",query:{type:t,id:e}})}}},h=u,d=(a("822e"),a("2877")),f=Object(d["a"])(h,n,i,!1,null,null,null);e["default"]=f.exports},"579d":function(t,e,a){"use strict";a("99af");var n=a("5530"),i=a("53ca"),r=a("b85c"),o=a("2f62"),s=a("0644"),c=a.n(s);function l(t,e){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(r["a"])(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=e[s];l&&("object"===Object(i["a"])(l)?n[s]=c()(l):n[s]=l)}}catch(u){o.e(u)}finally{o.f()}return n}e["a"]=function(t,e,a){return{computed:{moduleName:function(){return"".concat(this.$route.path).concat(e?"_"+e:"")},cacheParams:function(){return this.$store.state.dataCache.params[this.moduleName]}},methods:Object(n["a"])(Object(n["a"])({},Object(o["d"])(["SET_CACHE_PARAMS"])),{},{cacheParamData:function(){this.SET_CACHE_PARAMS({moduleName:this.moduleName,params:l(t,this)})},recoveryDataParams:function(){this.cacheParams&&(l(t,this.cacheParams,this),a||this.SET_CACHE_PARAMS({moduleName:this.moduleName}))}}),created:function(){this.recoveryDataParams()}}}},"822e":function(t,e,a){"use strict";var n=a("0b1b"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-051a4130.8b68a4d6.js.map