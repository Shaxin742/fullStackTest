{"version":3,"sources":["webpack:///./src/views/taskConfigCenter/businessScenarioManage/orchestrationTask.vue?f699","webpack:///./src/views/taskConfigCenter/businessScenarioManage/orchestrationTask.vue?2774","webpack:///./src/views/taskConfigCenter/businessScenarioManage/component/addPhase.vue?3625","webpack:///./src/views/taskConfigCenter/businessScenarioManage/component/addPhase.vue","webpack:///./src/views/taskConfigCenter/businessScenarioManage/component/addPhase.vue?50f7","webpack:///./src/views/taskConfigCenter/businessScenarioManage/component/addPhase.vue?a49f","webpack:///./src/views/taskConfigCenter/businessScenarioManage/orchestrationTask.vue","webpack:///./src/views/taskConfigCenter/businessScenarioManage/orchestrationTask.vue?6cd0","webpack:///./src/views/taskConfigCenter/businessScenarioManage/orchestrationTask.vue?05ce"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","on","addPhaseItem","_v","addTasks","selectedPhases","confirm","back","loadData","model","value","queryParams","callback","$$v","$set","expression","_l","item","index","key","$event","dragTasks","_s","taskName","staticStyle","page","total","handleCurrentChange","id","dragPhases","e","stageName","deletePhases","preventDefault","dropItem","directives","name","rawName","dropTaskItem","dragstart","dragenter","dragend","val","handleClose","delPhase","phaseVisible","cancel","confirmAddPhase","staticRenderFns","visible","cancelDialog","ref","phaseForm","rules","required","message","trigger","stageDesc","type","phaseFor","validate","valid","console","log","scenesId","$route","query","data","then","res","error","$message","confirmAdd","resetFields","cancelVisible","component","phasesList","taskList","selectedTaskList","dragItem","limit","draging","target","scenesType","$router","push","path","length","success","splice","filter","rows","map","taskId","stageTasksResponses","forEach","element","ev","stopPropagation","some","stageId","oldIndex","indexOf","newIndex","newItems","tag","child","getStageTaskByScenesId","document","body","ondrop","event","components","addPhase","draggable"],"mappings":"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","file":"assets/js/chunk-e166bbae.9782ebf6.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orchestrationTask.vue?vue&type=style&index=0&id=4fd7d21e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orchestrationTask.vue?vue&type=style&index=0&id=4fd7d21e&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"orchestration-task\"},[_c('base-panel',{attrs:{\"title\":\"阶段设置\"}},[_c('template',{staticClass:\"title-right-btns\",slot:\"title-right\"},[_c('el-button',{on:{\"click\":_vm.addPhaseItem}},[_vm._v(\"新增阶段\")]),_c('el-button',{on:{\"click\":_vm.addTasks}},[_vm._v(\"新增任务\")]),_c('el-button',{on:{\"click\":function () {\n            _vm.selectedPhases = [];\n          }}},[_vm._v(\"清除任务 \")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[_vm._v(\"提 交\")]),_c('el-button',{on:{\"click\":_vm.back}},[_vm._v(\"取 消\")])],1),_c('el-row',{attrs:{\"gutter\":30}},[_c('el-col',{staticClass:\"tasks\",attrs:{\"span\":5}},[_c('el-form',{staticClass:\"taskSearch\",attrs:{\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label-width\":\"100px\",\"label\":\"任务名称：\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"size\":\"mini\"},on:{\"blur\":_vm.loadData},model:{value:(_vm.queryParams.taskName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"taskName\", $$v)},expression:\"queryParams.taskName\"}})],1)],1),_c('ul',{staticClass:\"businessScenario\"},_vm._l((_vm.taskList),function(item,index){return _c('li',{key:index,attrs:{\"draggable\":\"\"},on:{\"dragstart\":function($event){return _vm.dragTasks(item)}}},[_vm._v(\" \"+_vm._s(item.taskName)+\" \")])}),0),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-pagination',{attrs:{\"small\":\"\",\"page-count\":_vm.page,\"page-size\":\"10\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"pager-count\":\"5\"},on:{\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('el-col',{attrs:{\"span\":19}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"phasesTitle\"},[_vm._v(\"阶段\")]),_c('ul',{staticClass:\"phasesContainer\"},[_vm._l((_vm.phasesList),function(item,index){return _c('li',{key:item.id,staticClass:\"phases\",attrs:{\"draggable\":\"\"},on:{\"dragstart\":function($event){return _vm.dragPhases(_vm.e, item)}}},[_vm._v(\" \"+_vm._s(item.stageName)+\" \"),_c('span',{on:{\"click\":function($event){return _vm.deletePhases(item, index)}}},[_c('i',{staticClass:\"el-icon-close\"})])])}),_c('li',{staticClass:\"phases state\",on:{\"click\":_vm.addPhaseItem}},[_vm._v(\"阶段+\")])],2)]),_c('el-col',{attrs:{\"span\":18}},[_c('div',{staticClass:\"stageTasksResponsesContainer\",on:{\"dragover\":function (e) { return e.preventDefault(); },\"drop\":_vm.dropItem}},_vm._l((_vm.selectedPhases),function(item,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedPhases.length),expression:\"selectedPhases.length\"}],key:item.id,staticClass:\"selectedPhases\",attrs:{\"draggable\":\"\"},on:{\"dragover\":function (e) { return e.preventDefault(); },\"drop\":function($event){return _vm.dropTaskItem(index)},\"dragstart\":function($event){return _vm.dragstart(item)},\"dragenter\":function($event){return _vm.dragenter(item)},\"dragend\":function($event){return _vm.dragend(item)}}},[_c('section',{staticClass:\"phasesName\"},[_vm._v(_vm._s(item.stageName))]),_c('section',{staticClass:\"phasesTags\"},_vm._l((item.taskList),function(val,index){return _c('el-tag',{key:index,staticClass:\"taskList\",attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleClose(val, item)}}},[_vm._v(\" \"+_vm._s(val.taskName)+\" \")])}),1),_c('el-button',{staticClass:\"phaseDelete\",attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.delPhase(index)}}})],1)}),0)])],1)],1)],1)],2),_c('addPhase',{attrs:{\"visible\":_vm.phaseVisible},on:{\"cancel\":_vm.cancel,\"confirm\":_vm.confirmAddPhase}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('simple-dialog',{attrs:{\"dialogTitle\":\"阶段新增\",\"dialog-visible\":_vm.visible,\"dialogWidth\":\"30%\",\"botton-show\":\"true\",\"close-on-click-modal\":false,\"before-close\":_vm.cancelDialog},on:{\"saveEmit\":_vm.confirm,\"cancelEmit\":_vm.cancelDialog}},[_c('span',[_c('el-form',{ref:\"phaseFor\",attrs:{\"model\":_vm.phaseForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"阶段名称\",\"prop\":\"stageName\"}},[_c('el-input',{model:{value:(_vm.phaseForm.stageName),callback:function ($$v) {_vm.$set(_vm.phaseForm, \"stageName\", $$v)},expression:\"phaseForm.stageName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"阶段描述\",\"prop\":\"stageDesc\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.phaseForm.stageDesc),callback:function ($$v) {_vm.$set(_vm.phaseForm, \"stageDesc\", $$v)},expression:\"phaseForm.stageDesc\"}})],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Emit, Ref } from 'vue-property-decorator';\r\nimport { addScenesStage } from '@api/businessScenarioManage';\r\n@Component\r\nexport default class AddPhase extends Vue {\r\n  name: 'AddPhase';\r\n\r\n  @Ref() phaseFor;\r\n  @Prop() visible;\r\n  @Emit('confirm')\r\n  confirmAdd(item: Record<string, any>) {}\r\n  @Emit('cancel')\r\n  cancelVisible() {}\r\n\r\n  private rules = {\r\n    stageName: [{ required: true, message: '请输入阶段名称', trigger: 'blur' }],\r\n    stageDesc: [\r\n      { required: true, message: '请选择阶段描述', trigger: 'change' }\r\n    ]\r\n  };\r\n\r\n  private phaseForm: Record<string, any> = {\r\n    stageName: '',\r\n    stageDesc: '',\r\n    type: 'phases'\r\n  };\r\n\r\n  // 确定\r\n  confirm() {\r\n    this.phaseFor.validate((valid) => {\r\n      if (valid) {\r\n        // const data = cloneDeep(this.phaseForm);\r\n        const { scenesId } = this.$route.query;\r\n        const data = {\r\n          scenesId,\r\n          ...this.phaseForm\r\n        };\r\n        addScenesStage(data).then((res) => {\r\n          console.log(res);\r\n          if (!res.error) {\r\n            res.data.type = 'phases';\r\n            this.confirmAdd(res.data);\r\n            this.cancelDialog();\r\n          } else {\r\n            this.$message.error(`新增失败:${res.error.message}`);\r\n          }\r\n        });\r\n      } else {\r\n        console.log('error submit!!');\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n  //取消\r\n  cancelDialog() {\r\n    this.phaseFor.resetFields();\r\n    this.cancelVisible();\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addPhase.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addPhase.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./addPhase.vue?vue&type=template&id=219e8e7c&\"\nimport script from \"./addPhase.vue?vue&type=script&lang=ts&\"\nexport * from \"./addPhase.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport draggable from 'vuedraggable';\r\nimport addPhase from './component/addPhase.vue';\r\nimport { Vue, Component, Ref } from 'vue-property-decorator';\r\nimport { loadData } from '@api/taskLibraryManage';\r\nimport {\r\n  getStageTaskByScenesId,\r\n  sceneArrangement,\r\n  deleteScenesStage\r\n} from '@api/businessScenarioManage';\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n@Component({\r\n  components: { addPhase, draggable }\r\n})\r\nexport default class OrchestrationTask extends Vue {\r\n  name: 'OrchestrationTask';\r\n\r\n  private phasesList: Array<any> = []; //阶段列表\r\n  private taskList: Array<any> = []; //任务列表\r\n  private selectedPhases: Array<any> = []; //已选阶段列表\r\n  private selectedTaskList: Array<any> = []; //已选任务列表 用于决断任务列表数据能否拖拽\r\n  private dragItem: Record<string, any> = {}; // 拖拽\r\n\r\n  private total = 0;\r\n  private page = 1;\r\n  private limit = 10;\r\n  private queryParams: any = {\r\n    taskName: ''\r\n  };\r\n  private phaseVisible = false;\r\n\r\n  private draging: Record<string, any> = {}; //拖拽列表时 被拖拽的对象\r\n  private target: Record<string, any> = {}; //目标对象\r\n  @Ref() parentNode;\r\n\r\n  // 新增任务\r\n  addTasks() {\r\n    const { scenesId, scenesType } = this.$route.query;\r\n    this.$router.push({\r\n      path: '/taskConfigCenter/addTasks',\r\n      query: { scenesId, scenesType }\r\n    });\r\n  }\r\n  // 新增阶段\r\n  addPhaseItem() {\r\n    this.phaseVisible = true;\r\n  }\r\n\r\n  // 阶段确认\r\n  confirmAddPhase(data: Record<string, any>) {\r\n    console.log(data);\r\n    data.id = this.phasesList.length;\r\n    this.phasesList.push(data);\r\n  }\r\n  // 阶段取消\r\n  cancel() {\r\n    this.phaseVisible = false;\r\n  }\r\n\r\n  // 删除阶段\r\n  deletePhases(item, index) {\r\n    const { scenesId } = this.$route.query;\r\n    const data = { scenesId, ...item };\r\n    deleteScenesStage(data).then((res) => {\r\n      if (!res.error) {\r\n        // this.getStageTaskByScenesId();\r\n        this.$message.success('删除成功');\r\n        this.phasesList.splice(index, 1);\r\n        this.selectedPhases = this.selectedPhases.filter(\r\n          (val) => val.stageName !== item.stageName\r\n        );\r\n      } else {\r\n        this.$message.error(`删除失败:${res.error.message}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 获取任务列表\r\n  loadData() {\r\n    const { limit, page, queryParams } = this;\r\n    const { scenesId } = this.$route.query;\r\n    const data = {\r\n      scenesId,\r\n      limit,\r\n      page,\r\n      ...queryParams\r\n    };\r\n    loadData(data).then((res) => {\r\n      this.taskList = [];\r\n      if (!res.error) {\r\n        // 处理数据\r\n        res.data.rows.map((item) => {\r\n          const val = {\r\n            taskId: item.id,\r\n            taskName: item.taskName,\r\n            type: 'task'\r\n          };\r\n          this.taskList.push(val);\r\n        });\r\n        this.total = res.data.total;\r\n      } else {\r\n        this.$message.error(`访问失败:${res.error.message}`);\r\n      }\r\n    });\r\n  }\r\n  // 翻页\r\n  handleCurrentChange(val) {\r\n    this.page = val;\r\n    this.loadData();\r\n  }\r\n  // 获取阶段列表\r\n  getStageTaskByScenesId() {\r\n    const { scenesId } = this.$route.query;\r\n    this.selectedPhases = [];\r\n    getStageTaskByScenesId({ scenesId }).then((res) => {\r\n      if (!res.error) {\r\n        // 阶段列表\r\n        this.phasesList = cloneDeep(res.data.stageTasksResponses) || [];\r\n        this.phasesList &&\r\n          this.phasesList.length &&\r\n          this.phasesList.map((item) => {\r\n            item.type = 'phases';\r\n          });\r\n\r\n        // 最右侧大列表\r\n        res.data.stageTasksResponses.forEach((item) => {\r\n          if (item.taskList.length) {\r\n            item.type = 'phases';\r\n            this.selectedPhases.push(item);\r\n            item.taskList.forEach((element) => {\r\n              element.type = 'task';\r\n              this.selectedTaskList.push(element);\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        this.$message.error('获取阶段失败');\r\n      }\r\n    });\r\n  }\r\n  // 拖拽阶段\r\n  dragPhases(e, item: any) {\r\n    item.taskList = [];\r\n    this.dragItem = cloneDeep(item);\r\n  }\r\n\r\n  // 拖拽阶段放置\r\n  dropItem(ev) {\r\n    ev.stopPropagation();\r\n    if (this.dragItem.type === 'phases') {\r\n      if (\r\n        !this.selectedPhases.some(\r\n          (item) => item.stageId === this.dragItem.stageId\r\n        )\r\n      ) {\r\n        this.selectedPhases.push(cloneDeep(this.dragItem));\r\n        this.dragItem = {};\r\n      } else {\r\n        this.$message.error('禁止拖拽相同阶段');\r\n      }\r\n    }\r\n  }\r\n\r\n  // 拖拽任务\r\n  dragTasks(item: any) {\r\n    this.dragItem = cloneDeep(item);\r\n  }\r\n\r\n  // 拖拽任务放置\r\n  dropTaskItem(index) {\r\n    if (this.dragItem.type === 'task') {\r\n      if (\r\n        !this.selectedTaskList.some(\r\n          (item) => item.taskId === this.dragItem.taskId\r\n        )\r\n      ) {\r\n        this.selectedPhases[index].taskList.push(cloneDeep(this.dragItem));\r\n        this.selectedTaskList.push(cloneDeep(this.dragItem));\r\n      } else {\r\n        this.$message.error('禁止拖拽相同任务');\r\n      }\r\n    }\r\n    this.dragItem = {};\r\n  }\r\n\r\n  /*******拖拽最右侧大列表 */\r\n  // 记录初始信息\r\n  dragstart(value) {\r\n    this.target = value;\r\n  }\r\n  // 做最终操作\r\n  dragend(value) {\r\n    if (this.target != this.draging) {\r\n      const oldIndex = this.selectedPhases.indexOf(this.target);\r\n      const newIndex = this.selectedPhases.indexOf(this.draging);\r\n      const newItems = [...this.selectedPhases];\r\n      // 删除老的节点\r\n      newItems.splice(oldIndex, 1);\r\n      // 在列表中目标位置增加新的节点\r\n      newItems.splice(newIndex, 0, this.target);\r\n      // this.items一改变，transition-group就起了作用\r\n      this.selectedPhases = [...newItems];\r\n    }\r\n  }\r\n  // 记录移动过程中信息\r\n  dragenter(value) {\r\n    this.draging = value;\r\n  }\r\n\r\n  confirm() {\r\n    const { scenesId } = this.$route.query;\r\n    const data: any = { scenesId, stageTasksResponses: this.selectedPhases };\r\n    sceneArrangement(data).then((res) => {\r\n      if (!res.error) {\r\n        this.$message.success('提交成功');\r\n        this.$router.back();\r\n      } else {\r\n        this.$message.error('提交失败');\r\n      }\r\n    });\r\n  }\r\n  // 返回\r\n  back() {\r\n    this.$router.back();\r\n  }\r\n  // 关闭tag\r\n  handleClose(tag, item) {\r\n    item.taskList.forEach((child, index) => {\r\n      if (child.taskId === tag.taskId) {\r\n        console.log(child, index);\r\n        item.taskList.splice(index, 1);\r\n      }\r\n    });\r\n    this.selectedTaskList.forEach((item, index) => {\r\n      if (item.taskId === tag.taskId) {\r\n        this.selectedTaskList.splice(index, 1);\r\n      }\r\n    });\r\n  }\r\n  delPhase(index) {\r\n    this.selectedPhases.splice(index, 1);\r\n  }\r\n\r\n  created() {\r\n    // 获取任务列表\r\n    this.loadData();\r\n    // 获取阶段列表\r\n    this.getStageTaskByScenesId();\r\n  }\r\n\r\n  mounted() {\r\n    //为了防止火狐浏览器拖拽的时候以新标签打开，此代码真实有效\r\n    document.body.ondrop = function(event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    };\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orchestrationTask.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orchestrationTask.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./orchestrationTask.vue?vue&type=template&id=4fd7d21e&scoped=true&\"\nimport script from \"./orchestrationTask.vue?vue&type=script&lang=ts&\"\nexport * from \"./orchestrationTask.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./orchestrationTask.vue?vue&type=style&index=0&id=4fd7d21e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fd7d21e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}