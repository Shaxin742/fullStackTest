{"version":3,"sources":["webpack:///./src/views/processConfig/AddConfig/formControl.vue?4b7d","webpack:///./src/views/processConfig/AddConfig/formControl.vue","webpack:///./src/views/processConfig/AddConfig/formControl.vue?6c36","webpack:///./src/views/processConfig/AddConfig/formControl.vue?65c5","webpack:///./src/views/processConfig/AddConfig/formControl.vue?2846","webpack:///./node_modules/vuex-class/lib/bindings.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/processConfig/AddConfig/formControl.vue?c581","webpack:///./src/utils/commonUtil.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","userTaskList","activeName","on","handleClick","children","tableFormList","tableColumns","formEditAction","customList","staticRenderFns","processTemplate","listFrom","init","title","onClick","setFormItem","_this","prop","label","align","showOverflowTooltip","h","record","props","value","editable","change","selectionChange","readable","length","tempNodes","firstNode","forEach","item","id","currentStatus","editFromList","newFromItems","form","formAttribute","formList","itemList","nodeId","formItem","key","type","extendProp","extendPropList","cols","tableCols","itemExtendProp","push","diff","find","undefined","nodeName","$set","Object","keys","items","map","prototype","hasOwnProperty","call","st","tt","updateForm","refreshPreview","formLists","$store","dispatch","datas","tempId","state","currentTempId","then","data","error","$message","message","dataLists","JSON","parse","Base64","decode","diffExend","selectChange","saveFormChange","childRefresh","Array","extendList","$router","name","query","$route","flag","State","customForm","Action","components","previewForm","component","createBindingHelper","Getter","Mutation","namespace","helper","createNamespacedHelper","namespacedHelper","a","b","proto","options","merge","console","warn","bindTo","mapFn","makeDecorator","componentOptions","_a","mapObject","extractNamespace","n","res","obj","$","$find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","target","forced","callbackfn","arguments","arrayFind","arr","i","arrayFindDeep","menu","arrIntersection","arr1","arr2","bSet","Set","from","filter","has"],"mappings":"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","file":"assets/js/chunk-1f9db320.83a73fb3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"formControl\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('div',{staticClass:\"left-main\"},[_c('simple-card',{staticClass:\"hgieht-control\",attrs:{\"title\":\"节点选择\"}},[_c('Tabs',{attrs:{\"tab-list\":_vm.userTaskList,\"tab-active\":_vm.activeName,\"tab-position\":\"left\"},on:{\"tabClick\":_vm.handleClick}})],1)],1)]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"left-main\"},[_c('simple-card',{attrs:{\"title\":\"表单项控制\"}},[_c('base-table',{attrs:{\"tableKey\":_vm.activeName,\"row-key\":\"formItem\",\"height\":\"360\",\"tree-props\":{ children: 'extendProp' },\"data-source\":_vm.tableFormList,\"columns\":_vm.tableColumns(),\"show-summary\":false,\"border-style\":true}})],1)],1)]),_c('el-col',{attrs:{\"span\":14}},[_c('simple-card',{attrs:{\"title\":\"表单预览\",\"actions\":_vm.formEditAction()}},[_c('div',{staticClass:\"formControl-right\"},[_c('previewForm',{attrs:{\"formAttribute\":_vm.customList,\"mode\":\"preview\"}})],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Vue, Component, Watch } from 'vue-property-decorator';\r\nimport previewForm from '../customForm/compoents/previewForm.vue';\r\nimport { namespace } from 'vuex-class';\r\nconst processTemplate = namespace('processTemplate');\r\nimport { arrayFind } from '@utils/commonUtil';\r\nimport Base64 from '@utils/Base64';\r\nimport { differenceWith, cloneDeep } from 'lodash';\r\nimport { listFormProcess } from '@api/processConfig';\r\ninterface FormAttribute {\r\n  labelPosition: string;\r\n  labelSuffix: string;\r\n  labelWidth: string;\r\n  formList: Array<any>;\r\n}\r\n@Component({\r\n  components: {\r\n    previewForm\r\n  }\r\n})\r\nexport default class FormControl extends Vue {\r\n  @processTemplate.State((state) => state.userTaskList) userTaskList;\r\n  @processTemplate.State((state) => state.form) form;\r\n  @processTemplate.State((state) => state.customForm) formAttribute;\r\n  @processTemplate.State((state) => state.currentStatus) currentStatus;\r\n  @processTemplate.Action('saveFormChange') saveFormChange;\r\n  private tableFormList: Array<any> = [];\r\n  private listFrom: any = {};\r\n  private activeName = '';\r\n  private customList: any = {};\r\n\r\n  @Watch('userTaskList')\r\n  initFormsByNodes() {\r\n    this.init();\r\n  }\r\n\r\n  formEditAction() {\r\n    return [\r\n      {\r\n        title: '编辑表单',\r\n        onClick: this.setFormItem\r\n      }\r\n    ];\r\n  }\r\n  tableColumns() {\r\n    const _this = this;\r\n    return [\r\n      {\r\n        prop: 'nodeName',\r\n        label: '表单项',\r\n        align: 'center',\r\n        showOverflowTooltip: true,\r\n        'min-width': '100'\r\n      },\r\n      {\r\n        prop: 'editable',\r\n        label: '可修改',\r\n        align: 'center',\r\n        showOverflowTooltip: true,\r\n        'min-width': '100',\r\n        render(h, { record }) {\r\n          return h('el-checkbox', {\r\n            props: {\r\n              value: record.editable,\r\n              'true-label': 1,\r\n              'false-label': 0\r\n            },\r\n            on: {\r\n              change: (value: boolean) => {\r\n                record.editable = value;\r\n                _this.selectionChange(record, 'editable');\r\n              }\r\n            }\r\n          });\r\n        }\r\n      },\r\n      {\r\n        prop: 'readable',\r\n        label: '只读',\r\n        align: 'center',\r\n        showOverflowTooltip: true,\r\n        'min-width': '100',\r\n        render(h, { record }) {\r\n          return h('el-checkbox', {\r\n            props: {\r\n              value: record.readable,\r\n              'true-label': 1,\r\n              'false-label': 0\r\n            },\r\n            on: {\r\n              change: (value: boolean) => {\r\n                record.readable = value;\r\n                _this.selectionChange(record, 'readable');\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    ];\r\n  }\r\n  init() {\r\n    if (this.userTaskList.length > 0) {\r\n      // 初始化节点列表\r\n      const tempNodes = {};\r\n      let firstNode = '';\r\n      this.userTaskList.forEach((item) => {\r\n        if (!firstNode) {\r\n          firstNode = item.id;\r\n        }\r\n        tempNodes[item.id] = [];\r\n      });\r\n      this.activeName = firstNode;\r\n      if (this.currentStatus === 'edit') {\r\n        this.editFromList(firstNode);\r\n      } else {\r\n        let newFromItems: Array<any> = [];\r\n        if (this.form.length > 0) {\r\n          this.form.forEach((item) => {\r\n            this.formAttribute.formList.forEach((itemList) => {\r\n              if (tempNodes[item.nodeId]) {\r\n                if (item.formItem === itemList.key) {\r\n                  if (itemList.type === 'table' && item.extendProp) {\r\n                    const extendPropList: Array<any> = [];\r\n                    itemList.cols.forEach((tableCols) => {\r\n                      item.extendProp.forEach((itemExtendProp) => {\r\n                        if (itemExtendProp.formItem === tableCols.prop) {\r\n                          extendPropList.push(itemExtendProp);\r\n                        }\r\n                      });\r\n\r\n                      const diff = extendPropList.find((value) => {\r\n                        return value.formItem === tableCols.prop;\r\n                      });\r\n                      if (diff === undefined) {\r\n                        extendPropList.push({\r\n                          editable: 0,\r\n                          formItem: tableCols['prop'],\r\n                          nodeName: tableCols['label'],\r\n                          readable: 0,\r\n                          nodeId: item.nodeId\r\n                        });\r\n                      }\r\n                    });\r\n                    this.$set(item, 'extendProp', extendPropList);\r\n                    tempNodes[item.nodeId].push(item);\r\n                  } else {\r\n                    const diff = tempNodes[item.nodeId].find((value) => {\r\n                      return value.formItem === itemList.key;\r\n                    });\r\n                    if (diff === undefined) {\r\n                      tempNodes[item.nodeId].push(item);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          });\r\n          Object.keys(tempNodes).forEach((nodeId) => {\r\n            let items = tempNodes[nodeId];\r\n            if (items) {\r\n              if (items.length === 0 && tempNodes[firstNode].length > 0) {\r\n                items = tempNodes[firstNode].map((item) => {\r\n                  if (\r\n                    Object.prototype.hasOwnProperty.call(item, 'extendProp')\r\n                  ) {\r\n                    const extendPropList: Array<any> = [];\r\n                    item.extendProp.forEach((tableCols) => {\r\n                      extendPropList.push({\r\n                        formItem: tableCols['formItem'],\r\n                        nodeName: tableCols['nodeName'],\r\n                        readable: 0,\r\n                        editable: 0,\r\n                        nodeId: nodeId\r\n                      });\r\n                    });\r\n                    return {\r\n                      formItem: item['formItem'],\r\n                      nodeName: item['nodeName'],\r\n                      readable: 0,\r\n                      editable: 0,\r\n                      nodeId: nodeId,\r\n                      extendProp: extendPropList\r\n                    };\r\n                  } else {\r\n                    return {\r\n                      formItem: item['formItem'],\r\n                      nodeName: item['nodeName'],\r\n                      readable: 0,\r\n                      editable: 0,\r\n                      nodeId: nodeId\r\n                    };\r\n                  }\r\n                });\r\n              }\r\n              tempNodes[nodeId] = items;\r\n            }\r\n          });\r\n          newFromItems = differenceWith(\r\n            this.formAttribute.formList,\r\n            tempNodes[firstNode],\r\n            (st: any, tt: any) => {\r\n              return st['key'] === tt['formItem'];\r\n            }\r\n          );\r\n        } else {\r\n          newFromItems = this.formAttribute.formList;\r\n        }\r\n        Object.keys(tempNodes).forEach((nodeId) => {\r\n          let items = tempNodes[nodeId];\r\n          if (newFromItems.length > 0) {\r\n            items = tempNodes[nodeId];\r\n            items.push(\r\n              ...newFromItems.map((item) => {\r\n                if (item.type === 'table') {\r\n                  const extendPropList: Array<any> = [];\r\n                  item.extendProp &&\r\n                    item.extendProp.forEach((tableCols) => {\r\n                      extendPropList.push({\r\n                        editable: 0,\r\n                        formItem: tableCols['prop'],\r\n                        nodeName: tableCols['label'],\r\n                        readable: 0,\r\n                        nodeId: nodeId\r\n                      });\r\n                    });\r\n                  return {\r\n                    editable: 0,\r\n                    formItem: item['key'],\r\n                    nodeName: item['label'],\r\n                    readable: 0,\r\n                    nodeId: nodeId,\r\n                    extendProp: extendPropList\r\n                  };\r\n                } else {\r\n                  return {\r\n                    editable: 0,\r\n                    formItem: item['key'],\r\n                    nodeName: item['label'],\r\n                    readable: 0,\r\n                    nodeId: nodeId\r\n                  };\r\n                }\r\n              })\r\n            );\r\n          }\r\n        });\r\n        this.listFrom = tempNodes;\r\n        this.tableFormList = this.listFrom[firstNode];\r\n        this.updateForm();\r\n        this.refreshPreview();\r\n      }\r\n    }\r\n  }\r\n\r\n  updateForm() {\r\n    const formLists: any = [];\r\n    Object.keys(this.listFrom).forEach((items: any) => {\r\n      formLists.push(...this.listFrom[items]);\r\n    });\r\n\r\n    this.customList = cloneDeep(this.formAttribute);\r\n    this.$store.dispatch('processTemplate/updateForm', formLists);\r\n  }\r\n  refreshPreview() {\r\n    this.tableFormList &&\r\n      this.tableFormList.forEach((item) => {\r\n        this.selectionChange(item, '');\r\n      });\r\n  }\r\n  // 编辑表单项控制\r\n  editFromList(nodeId) {\r\n    this.tableFormList = [];\r\n    const datas = {\r\n      nodeId: nodeId,\r\n      tempId: this.$store.state.processTemplate.currentTempId\r\n    };\r\n    listFormProcess(datas).then(({ data, error }) => {\r\n      if (error) {\r\n        this.$message.error(error.message);\r\n        return false;\r\n      } else {\r\n        const dataLists: Array<any> = [];\r\n        this.formAttribute.formList.forEach((itemList) => {\r\n          // 接口数据\r\n          if (data.length > 0) {\r\n            // 如果接口有数据，则做数据匹配处理\r\n            data.forEach((item) => {\r\n              if (item.formItem === itemList.key) {\r\n                itemList.editable = item.editable;\r\n                itemList.readable = item.readable;\r\n                if (item.extendProp && itemList.type === 'table') {\r\n                  item.extendProp = JSON.parse(Base64.decode(item.extendProp));\r\n                  const extendPropList: Array<any> = [];\r\n                  itemList.cols.forEach((tableCols) => {\r\n                    item.extendProp.forEach((itemExtendProp) => {\r\n                      if (itemExtendProp.formItem === tableCols.prop) {\r\n                        extendPropList.push(itemExtendProp);\r\n                      }\r\n                    });\r\n                    const diffExend = extendPropList.find((value) => {\r\n                      return value.formItem === tableCols.prop;\r\n                    });\r\n                    if (diffExend === undefined && tableCols['prop']) {\r\n                      extendPropList.push({\r\n                        editable: 0,\r\n                        formItem: tableCols['prop'],\r\n                        nodeName: tableCols['label'],\r\n                        readable: 0,\r\n                        nodeId: nodeId\r\n                      });\r\n                    }\r\n                  });\r\n                  this.$set(item, 'extendProp', extendPropList);\r\n                }\r\n                dataLists.push(item);\r\n              }\r\n            });\r\n          }\r\n          // 数据没有匹配上的，初始值处理\r\n          const diff = dataLists.find((value) => {\r\n            return value.formItem === itemList.key;\r\n          });\r\n          if (diff === undefined) {\r\n            if (itemList.type === 'table') {\r\n              const extendPropList: Array<any> = [];\r\n              itemList.cols.forEach((tableCols) => {\r\n                if (tableCols['prop']) {\r\n                  extendPropList.push({\r\n                    editable: 0,\r\n                    formItem: tableCols['prop'],\r\n                    nodeName: tableCols['label'],\r\n                    readable: 0,\r\n                    nodeId: nodeId\r\n                  });\r\n                }\r\n              });\r\n              dataLists.push({\r\n                formItem: itemList['key'],\r\n                nodeName: itemList['label'],\r\n                readable: 0,\r\n                editable: 0,\r\n                nodeId: nodeId,\r\n                extendProp: extendPropList\r\n              });\r\n            } else {\r\n              dataLists.push({\r\n                formItem: itemList['key'],\r\n                nodeName: itemList['label'],\r\n                readable: 0,\r\n                editable: 0,\r\n                nodeId: nodeId\r\n              });\r\n            }\r\n          }\r\n        });\r\n        this.tableFormList = dataLists;\r\n        this.customList = cloneDeep(this.formAttribute);\r\n        this.$store.dispatch(\r\n          'processTemplate/updateTableFormList',\r\n          this.tableFormList\r\n        );\r\n        this.$store.dispatch('processTemplate/updateSelectChange', false);\r\n      }\r\n    });\r\n  }\r\n  // tab 切换\r\n  handleClick(value) {\r\n    this.activeName = value;\r\n    if (this.currentStatus === 'edit') {\r\n      if (this.$store.state.processTemplate.selectChange === true) {\r\n        this.saveFormChange();\r\n      }\r\n      this.editFromList(value);\r\n    } else {\r\n      this.tableFormList = this.listFrom[value];\r\n      this.refreshPreview();\r\n    }\r\n  }\r\n  selectionChange(record: any, childRefresh: string) {\r\n    this.$store.dispatch('processTemplate/updateSelectChange', true);\r\n    const formItem = arrayFind(\r\n      this.formAttribute.formList,\r\n      'key',\r\n      record.formItem\r\n    );\r\n    if (childRefresh === 'editable') {\r\n      if (record.editable === 1) {\r\n        record.readable = 0;\r\n      }\r\n    } else if (childRefresh === 'readable') {\r\n      if (record.readable === 1) {\r\n        record.editable = 0;\r\n      }\r\n    }\r\n    if (formItem) {\r\n      formItem.editable = record.editable;\r\n      formItem.readable = record.readable;\r\n      if (\r\n        Object.prototype.hasOwnProperty.call(record, 'extendProp') &&\r\n        record.extendProp\r\n      ) {\r\n        if (record.extendProp instanceof Array) {\r\n          record.extendProp.forEach((extendList) => {\r\n            extendList.editable = record.editable;\r\n            extendList.readable = record.readable;\r\n          });\r\n        }\r\n      }\r\n    }\r\n    this.updateForm();\r\n  }\r\n  // 表单编辑页面跳转\r\n  setFormItem() {\r\n    if (this.currentStatus === 'edit') {\r\n      if (this.$store.state.processTemplate.selectChange === true) {\r\n        this.saveFormChange();\r\n      }\r\n    }\r\n    this.$router.push({\r\n      name: 'customForm',\r\n      query: {\r\n        id: this.$route.query.id,\r\n        flag: this.$route.query.flag\r\n      }\r\n    });\r\n  }\r\n  // 表单\r\n  created() {\r\n    this.init();\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formControl.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formControl.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./formControl.vue?vue&type=template&id=5f3a37c7&scoped=true&\"\nimport script from \"./formControl.vue?vue&type=script&lang=ts&\"\nexport * from \"./formControl.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./formControl.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./formControl.vue?vue&type=style&index=1&id=5f3a37c7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f3a37c7\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formControl.vue?vue&type=style&index=1&id=5f3a37c7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formControl.vue?vue&type=style&index=1&id=5f3a37c7&lang=scss&scoped=true&\"","import { createDecorator } from 'vue-class-component';\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex';\nexport var State = createBindingHelper('computed', mapState);\nexport var Getter = createBindingHelper('computed', mapGetters);\nexport var Action = createBindingHelper('methods', mapActions);\nexport var Mutation = createBindingHelper('methods', mapMutations);\nexport function namespace(namespace, helper) {\n    function createNamespacedHelper(helper) {\n        function namespacedHelper(a, b) {\n            if (typeof b === 'string') {\n                var key = b;\n                var proto = a;\n                return helper(key, { namespace: namespace })(proto, key);\n            }\n            var type = a;\n            var options = merge(b || {}, { namespace: namespace });\n            return helper(type, options);\n        }\n        return namespacedHelper;\n    }\n    if (helper) {\n        console.warn('[vuex-class] passing the 2nd argument to `namespace` function is deprecated. pass only namespace string instead.');\n        return createNamespacedHelper(helper);\n    }\n    return {\n        State: createNamespacedHelper(State),\n        Getter: createNamespacedHelper(Getter),\n        Mutation: createNamespacedHelper(Mutation),\n        Action: createNamespacedHelper(Action)\n    };\n}\nfunction createBindingHelper(bindTo, mapFn) {\n    function makeDecorator(map, namespace) {\n        return createDecorator(function (componentOptions, key) {\n            if (!componentOptions[bindTo]) {\n                componentOptions[bindTo] = {};\n            }\n            var mapObject = (_a = {}, _a[key] = map, _a);\n            componentOptions[bindTo][key] = namespace !== undefined\n                ? mapFn(namespace, mapObject)[key]\n                : mapFn(mapObject)[key];\n            var _a;\n        });\n    }\n    function helper(a, b) {\n        if (typeof b === 'string') {\n            var key = b;\n            var proto = a;\n            return makeDecorator(key, undefined)(proto, key);\n        }\n        var namespace = extractNamespace(b);\n        var type = a;\n        return makeDecorator(type, namespace);\n    }\n    return helper;\n}\nfunction extractNamespace(options) {\n    var n = options && options.namespace;\n    if (typeof n !== 'string') {\n        return undefined;\n    }\n    if (n[n.length - 1] !== '/') {\n        return n + '/';\n    }\n    return n;\n}\nfunction merge(a, b) {\n    var res = {};\n    [a, b].forEach(function (obj) {\n        Object.keys(obj).forEach(function (key) {\n            res[key] = obj[key];\n        });\n    });\n    return res;\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formControl.vue?vue&type=style&index=0&lang=scss&\"","import moment from 'moment';\r\nimport $utils from '@utils/util';\r\nimport { refresh } from '../api/user';\r\n\r\nexport function getTimeDistance(type, date) {\r\n  let now = '';\r\n  if (date) {\r\n    now = new Date(date);\r\n  } else {\r\n    now = new Date();\r\n  }\r\n  const oneDay = 1000 * 60 * 60 * 24;\r\n\r\n  if (type === 'today') {\r\n    now.setHours(0);\r\n    now.setMinutes(0);\r\n    now.setSeconds(0);\r\n    return [moment(now), moment(now.getTime() + (oneDay - 1000))];\r\n  }\r\n\r\n  if (type === 'week') {\r\n    let day = now.getDay();\r\n    now.setHours(0);\r\n    now.setMinutes(0);\r\n    now.setSeconds(0);\r\n\r\n    if (day === 0) {\r\n      day = 6;\r\n    } else {\r\n      day -= 1;\r\n    }\r\n\r\n    const beginTime = now.getTime() - day * oneDay;\r\n\r\n    return [moment(beginTime), moment(beginTime + (7 * oneDay - 1000))];\r\n  }\r\n\r\n  if (type === 'month') {\r\n    const year = now.getFullYear();\r\n    const month = now.getMonth();\r\n    const nextDate = moment(now).add(1, 'months');\r\n    const nextYear = nextDate.year();\r\n    const nextMonth = nextDate.month();\r\n\r\n    return [\r\n      moment(`${year}-${fixedZero(month + 1)}-01 00:00:00`),\r\n      moment(\r\n        moment(\r\n          `${nextYear}-${fixedZero(nextMonth + 1)}-01 00:00:00`\r\n        ).valueOf() - 1000\r\n      )\r\n    ];\r\n  }\r\n\r\n  if (type === 'season') {\r\n    return [moment(now).startOf('quarter'), moment(now).endOf('quarter')];\r\n  }\r\n\r\n  if (type === 'year') {\r\n    const year = now.getFullYear();\r\n\r\n    return [moment(`${year}-01-01 00:00:00`), moment(`${year}-12-31 23:59:59`)];\r\n  }\r\n\r\n  if (type === 'day') {\r\n    return moment().format('YYYY-MM-DD');\r\n  }\r\n  if (type === 'hour') {\r\n    return moment().format('YYYY-MM-DD HH');\r\n  }\r\n  if (type === 'minute') {\r\n    return moment().format('YYYY-MM-DD HH:mm');\r\n  }\r\n  if (type === 'seconds') {\r\n    return moment().format('YYYY-MM-DD HH:mm:ss');\r\n  }\r\n}\r\n\r\nexport function fixedZero(val) {\r\n  return val * 1 < 10 ? `0${val}` : val;\r\n}\r\n\r\nexport function digitUppercase(n) {\r\n  const fraction = ['角', '分'];\r\n  const digit = ['零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖'];\r\n  const unit = [\r\n    ['元', '万', '亿'],\r\n    ['', '拾', '佰', '仟']\r\n  ];\r\n  let num = Math.abs(n);\r\n  let s = '';\r\n  fraction.forEach((item, index) => {\r\n    s += (digit[Math.floor(num * 10 * 10 ** index) % 10] + item).replace(\r\n      /零./,\r\n      ''\r\n    );\r\n  });\r\n  s = s || '整';\r\n  num = Math.floor(num);\r\n  for (let i = 0; i < unit[0].length && num > 0; i += 1) {\r\n    let p = '';\r\n    for (let j = 0; j < unit[1].length && num > 0; j += 1) {\r\n      p = digit[num % 10] + unit[1][j] + p;\r\n      num = Math.floor(num / 10);\r\n    }\r\n    s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;\r\n  }\r\n\r\n  return s\r\n    .replace(/(零.)*零元/, '元')\r\n    .replace(/(零.)+/g, '零')\r\n    .replace(/^整$/, '零元整');\r\n}\r\n\r\nexport function getDictText(dict, value) {\r\n  for (let i = 0; i < dict.length; i += 1) {\r\n    if (dict[i].value === value) {\r\n      return dict[i].text;\r\n    }\r\n  }\r\n}\r\n\r\nexport function currencyFormatter(currency, pre = '', precision = 2) {\r\n  if (currency !== undefined && currency !== null) {\r\n    currency = currency.toString().replace(/\\$|,/g, '');\r\n  }\r\n  // 检查传入数值为数值类型\r\n  if (isNaN(currency) || currency === '' || currency === null) {\r\n    return '';\r\n  }\r\n\r\n  // 获取符号(正/负数)\r\n  const sign = currency * 1 === (currency = Math.abs(currency));\r\n\r\n  currency = Math.floor(currency * Math.pow(10, precision) + 0.50000000001); // 把指定的小数位先转换成整数.多余的小数位四舍五入\r\n  let cents = currency % Math.pow(10, precision); // 求出小数位数值\r\n  currency = Math.floor(currency / Math.pow(10, precision)).toString(); // 求出整数位数值\r\n\r\n  if (precision !== 0) {\r\n    cents = cents.toString(); // 把小数位转换成字符串,以便求小数位长度\r\n\r\n    // 补足小数位到指定的位数\r\n    while (cents.length < precision) {\r\n      cents = '0' + cents;\r\n    }\r\n    cents = '.' + cents;\r\n  } else {\r\n    cents = '';\r\n  }\r\n\r\n  if (currency) {\r\n    currency = thousandthFormatter(currency);\r\n  }\r\n  return pre + ((sign ? '' : '-') + currency + cents);\r\n}\r\n\r\nexport function thousandthFormatter(value) {\r\n  let currency = value + '';\r\n  let result = 0;\r\n  if (currency) {\r\n    // 对整数部分进行千分位格式化.\r\n    for (let i = 0; i < Math.floor((currency.length - (1 + i)) / 3); i++) {\r\n      currency =\r\n        currency.substring(0, currency.length - (4 * i + 3)) +\r\n        ',' +\r\n        currency.substring(currency.length - (4 * i + 3));\r\n    }\r\n    result = currency;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function arrayFind(arr, key, value) {\r\n  for (let i = 0; i < arr.length; i += 1) {\r\n    if (arr[i][key] === value) {\r\n      return arr[i];\r\n    }\r\n  }\r\n}\r\n\r\nexport function uniqueArray(arr, key) {\r\n  const uni = [];\r\n  arr.forEach((item) => {\r\n    if (!arrayFind(uni, key, item[key])) {\r\n      uni.push(item);\r\n    }\r\n  });\r\n  return uni;\r\n}\r\n\r\nexport function arrayFindDeep(arr, key, value) {\r\n  for (let i = 0; i < arr.length; i += 1) {\r\n    const item = arr[i];\r\n    if (item.children) {\r\n      const menu = arrayFindDeep(item.children, key, value);\r\n      if (menu) {\r\n        return menu;\r\n      }\r\n    } else if (arr[i][key] === value) {\r\n      return arr[i];\r\n    }\r\n  }\r\n}\r\n\r\n// 数组取并集\r\nexport function arrUnion(arr1, arr2) {\r\n  const arr = Array.from(new Set(arr1.concat(arr2)));\r\n  return arr;\r\n}\r\n// 数组取交集\r\nexport function arrIntersection(arr1, arr2) {\r\n  const bSet = new Set(arr2);\r\n  const arr = Array.from(new Set(arr1.filter((item) => bSet.has(item))));\r\n  return arr;\r\n}\r\n// 从数组1中去除数组2中含有的元素，取差集(arr1-arr2)\r\nexport function arrDifference(arr1, arr2) {\r\n  const aSet = new Set(arr1);\r\n  const bSet = new Set(arr2);\r\n  const arr = Array.from(\r\n    new Set(\r\n      arr1.concat(arr2).filter((item) => aSet.has(item) && !bSet.has(item))\r\n    )\r\n  );\r\n  return arr;\r\n}\r\n// 除去请求参数里面的属性值为空的键值对\r\nexport function removeNullInObject(config) {\r\n  if (config instanceof Object && !Array.isArray(config)) {\r\n    for (const key in config) {\r\n      if (Array.isArray(config[key]) && config[key].length === 0) {\r\n        delete config[key];\r\n      } else if (!config[key] && config[key] !== 0) {\r\n        delete config[key];\r\n      }\r\n    }\r\n  }\r\n  return config;\r\n}\r\n\r\nexport function download(url, param, fileName) {\r\n  // 避免token过期，下载前先去获取最新token\r\n  refresh().then(({ data }) => {\r\n    if (data !== null) {\r\n      $utils.setStorage('auth_token', data);\r\n\r\n      const defaultParam = {};\r\n\r\n      // 添加token权限验证\r\n      const token = $utils.getStorage('auth_token');\r\n      if (token) {\r\n        defaultParam.token = token;\r\n      }\r\n\r\n      Object.assign(defaultParam, param);\r\n      const aLink = document.createElement('a');\r\n      // console.log('downloadUrl', $utils.queryString(url, defaultParam));\r\n      aLink.href = encodeURI($utils.queryString(url, defaultParam));\r\n      aLink.download = fileName || '';\r\n      let event;\r\n      if (window.MouseEvent) {\r\n        event = new MouseEvent('click');\r\n      } else {\r\n        event = document.createEvent('MouseEvent');\r\n        event.initMouseEvent(\r\n          'click',\r\n          true,\r\n          false,\r\n          window,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          false,\r\n          false,\r\n          false,\r\n          false,\r\n          0,\r\n          null\r\n        );\r\n      }\r\n      aLink.dispatchEvent(event);\r\n    } else {\r\n      try {\r\n        document.location.replace('/login');\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport function colOperRender(opers) {\r\n  return function(h, { record }) {\r\n    return h(\r\n      'div',\r\n      {},\r\n      opers.map((item) => {\r\n        return h(\r\n          'authorize',\r\n          {\r\n            props: {\r\n              code: item.code\r\n            }\r\n          },\r\n          [\r\n            h(\r\n              'el-button',\r\n              {\r\n                props: {\r\n                  type: 'text',\r\n                  size: 'small'\r\n                },\r\n                on: {\r\n                  click: () => item.onClick(record)\r\n                }\r\n              },\r\n              item.text\r\n            )\r\n          ]\r\n        );\r\n      })\r\n    );\r\n  };\r\n}\r\n\r\nexport function colRender(opers) {\r\n  return function(h, { record }) {\r\n    return h(\r\n      'div',\r\n      {},\r\n      opers.map((item) => {\r\n        return h(\r\n          'el-button',\r\n          {\r\n            props: {\r\n              type: 'text',\r\n              size: 'small'\r\n            },\r\n            on: {\r\n              click: () => item.onClick(record)\r\n            }\r\n          },\r\n          item.text\r\n        );\r\n      })\r\n    );\r\n  };\r\n}\r\n\r\n// 判断在当前的page和limit之下，删除某条纪录是否会造成页面无法留在当前页\r\nexport function iSsafe4DeleteRow(page, limit, total) {\r\n  let isSafe = true;\r\n  if (total === (page - 1) * limit + 1) {\r\n    isSafe = false;\r\n  }\r\n  return isSafe;\r\n}\r\n"],"sourceRoot":""}