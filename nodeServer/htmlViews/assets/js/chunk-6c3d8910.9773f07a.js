(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c3d8910"],{"12ec":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"parameViewTable",staticClass:"parameView"},[a("base-table",{ref:"commonTable",staticClass:"sortTable",attrs:{border:"","max-height":"370","data-source":e.parameterData,loading:e.loading,columns:e.httpService?e.columnsHttp():e.columns(),"show-summary":!1,"border-style":!0,"can-edit":""}})],1)},r=[],l=(a("4160"),a("d81d"),a("fb6a"),a("a434"),a("159b"),a("d4ec")),o=a("bee2"),n=a("262e"),s=a("2caf"),c=a("9ab4"),d=a("60a3"),u=a("ca00"),p=function(e){Object(n["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.typeList=[{label:"字符串",value:0},{label:"数字",value:1},{label:"日期",value:2},{label:"布尔",value:3}],e.dialogVisible=!1,e.changeDisabled=!1,e.changeDisType=!1,e.isAdd="",e.requiredlist=[],e}return Object(o["a"])(a,[{key:"WatchparameterData",value:function(){this.changeDis(),this.changeButton()}},{key:"WatchDictFlag",value:function(){0===this.dictFlag?this.requiredlist=[{label:"固定值",value:3}]:(this.requiredChange(),this.parameterData.forEach((function(e){e.required=""})))}},{key:"columns",value:function(){var e=this;return[{prop:"",type:"index",align:"center",label:"序号",width:"70"},{prop:"code",label:"参数code","header-align":"left","min-width":"100",render:function(e,t){var a=t.record;return!0===a.isEdit?e("el-input",{props:{value:a.code,clearable:!0,placeholder:"请输入参数code"},on:{input:function(e){a.code=e}}}):e("span",a.code)}},{prop:"name","header-align":"left",label:"参数名称","min-width":"120",editer:{type:"input",key:"name",clearable:!0,placeholder:"请输入参数名称"}},{prop:"type","header-align":"left",label:"参数类型","min-width":"120",render:function(t,a){var i=a.record;if(!1===i.isEdit){var r=Object(u["a"])(e.typeList,"value",i.type),l=r?r.label:i.type;return t("span",l)}var o=e.typeList.map((function(e){return t("el-option",{props:{value:e.value,key:e.value,label:e.label}})}));return t("el-select",{props:{value:i.type,clearable:!0,placeholder:"请输入参数类型"},on:{change:function(e){i.type=e}}},o)}},{prop:"required","header-align":"left",label:"是否必传","min-width":"120",editer:{type:"select",key:"required",config:{props:{placeholder:"请选择是否必传",clearable:!0},options:function(){return e.requiredlist}}}},{prop:"defaultValue","header-align":"left",label:"默认值","min-width":"120",editer:{type:"input",key:"defaultValue",placeholder:"请输入默认值"}},{prop:"",align:"center",label:"操作",width:"100",headerAlign:"center",render:function(t,a){var i=a.record;return!0===i.addButton?t("span",[t("el-button",{props:{type:"text",disabled:i.delButton},on:{click:function(){return e.deleteEdit(i)}}},"删除"),t("span",{style:"padding: 0 5px"},"|"),t("el-button",{props:{type:"text"},on:{click:function(){return e.addEdit(i)}}},"添加")]):t("span",[t("el-button",{props:{type:"text",disabled:i.delButton},on:{click:function(){return e.deleteEdit(i)}}},"删除")])}}]}},{key:"columnsHttp",value:function(){var e=this;return[{prop:"",type:"index",align:"center",label:"序号",width:"70"},{prop:"code",label:"参数code","header-align":"left","min-width":"100",editer:{type:"input",key:"code",placeholder:"请输入参数code"}},{prop:"name","header-align":"left",label:"参数名称","min-width":"120",editer:{type:"input",key:"name",placeholder:"请输入参数名称"}},{prop:"transType","header-align":"left",label:"传输方式","min-width":"120",editer:{type:"select",key:"transType",config:{props:{placeholder:"请选择传输方式"},options:function(){return[{label:"路径参数",value:0},{label:"formdata",value:2}]}}}},{prop:"type","header-align":"left",label:"参数类型","min-width":"120",editer:{type:"select",key:"type",config:{props:{placeholder:"请选择参数类型"},options:function(){return[{label:"字符串",value:0},{label:"数字",value:1},{label:"日期",value:2},{label:"布尔",value:3}]}}}},{prop:"required","header-align":"left",label:"是否必传","min-width":"120",editer:{type:"select",key:"required",config:{props:{placeholder:"请选择是否必传"},options:function(){return e.requiredlist}}}},{prop:"defaultValue","header-align":"left",label:"默认值","min-width":"120",editer:{type:"input",key:"defaultValue",placeholder:"请输入默认值"}},{prop:"",align:"center",label:"操作",width:"100",headerAlign:"center",render:function(t,a){var i=a.record;return!0===i.addButton?t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEdit(i)}}},"删除"),t("span",{style:"padding: 0 5px"},"|"),t("el-button",{props:{type:"text"},on:{click:function(){return e.addEdit(i)}}},"添加")]):t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEdit(i)}}},"删除")])}}]}},{key:"addEdit",value:function(e){var t=this,a=Object.assign({},e);for(var i in a)"frontId"===i?a[i]=a[i]+1:"edits"!==i&&(a[i]="");a.isCompatible="1",a.delButton=!1,a.isEdit=!0,this.parameterData.push(a),this.parameterData.length>1&&this.parameterData.forEach((function(e){t.$delete(e,"addButton")})),this.changeButton()}},{key:"changeButton",value:function(){var e=this,t=this.parameterData.slice(-1);t.forEach((function(t){e.$set(t,"addButton",!0)}))}},{key:"disabledchange",value:function(){var e=this;this.isCompatible&&this.parameterData.forEach((function(t){return e.$set(t,"disabled",!0),!0===t.disabled}))}},{key:"deleteEdit",value:function(e){var t=this;if(this.parameterData.length>1){for(var a=0;a<this.parameterData.length;a++)this.parameterData[a].frontId===e.frontId&&this.parameterData.splice(a,1);var i=this.parameterData.slice(-1);i.forEach((function(e){t.$set(e,"addButton",!0)}))}}},{key:"requiredChange",value:function(){"0"===this.isCompatible?this.requiredlist=[{label:"否",value:1},{label:"固定值",value:3}]:this.requiredlist=[{label:"是",value:0},{label:"否",value:1},{label:"固定值",value:3}]}},{key:"changeDis",value:function(){var e=this;"0"!==this.isCompatible&&"1"!==this.isCompatible||(this.isAdd="0"),"0"!==this.isAdd?this.parameterData.forEach((function(e){e.isEdit=!0,e.delButton=!1,e.edits=[0,1,1,1,1,1,1,0]})):this.parameterData.length>0?this.parameterData.forEach((function(t){"1"===t.isCompatible?(t.delButton=!1,t.isEdit=!0):(t.delButton=!0,t.isEdit=!1),"1"===e.isCompatible&&(t.delButton=!1),t.edits=[0,1,1,1,1,1,1,0]})):this.parameterData=[{frontId:1,code:"",name:"",type:"",required:"",defaultValue:"",isEdit:!0,isCompatible:"1",addButton:!0,edits:[0,1,1,1,1,1,0]}]}},{key:"mounted",value:function(){this.requiredChange()}}]),a}(d["e"]);Object(c["a"])([Object(d["c"])({default:1})],p.prototype,"dictFlag",void 0),Object(c["a"])([Object(d["c"])({default:1})],p.prototype,"isCompatible",void 0),Object(c["a"])([Object(d["c"])({default:[]})],p.prototype,"actions",void 0),Object(c["a"])([Object(d["c"])(String)],p.prototype,"parameterData",void 0),Object(c["a"])([Object(d["c"])(Boolean)],p.prototype,"httpService",void 0),Object(c["a"])([Object(d["f"])("parameterData",{immediate:!0})],p.prototype,"WatchparameterData",null),Object(c["a"])([Object(d["f"])("dictFlag")],p.prototype,"WatchDictFlag",null),p=Object(c["a"])([Object(d["a"])({components:{}})],p);var h=p,f=h,m=(a("9b9d"),a("2877")),b=Object(m["a"])(f,i,r,!1,null,null,null);t["a"]=b.exports},"1e45":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createDialog"},[a("el-dialog",e._g(e._b({staticClass:"dialogStyle",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:e.dialogWidth,"close-on-click-modal":!1,"before-close":e.cancelData},on:{"update:visible":function(t){e.dialogVisible=t}}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-form",{ref:"createForm",staticClass:"formCss labelSuffix",attrs:{model:e.createForm,rules:e.rules,"label-position":"left","label-suffix":"：","label-width":"120px"}},[a("el-form-item",{attrs:{label:e.nameType,prop:"name"}},[a("el-input",{attrs:{disabled:!e.bottonShow,placeholder:"请输入名称"},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),a("el-form-item",{attrs:{label:e.subTypeChange,prop:"subType"}},[a("el-select",{attrs:{disabled:!e.bottonShow,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.createForm.subType,callback:function(t){e.$set(e.createForm,"subType",t)},expression:"createForm.subType"}},e._l(e.connectorList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),e.fileVisible?a("div",[a("el-form-item",{attrs:{label:"根目录",prop:"localMenu"}},[a("el-input",{attrs:{disabled:!e.bottonShow,placeholder:"请输入"},model:{value:e.createForm.localMenu,callback:function(t){e.$set(e.createForm,"localMenu",t)},expression:"createForm.localMenu"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:e.pathType,prop:"path"}},[a("el-input",{attrs:{disabled:!e.bottonShow,placeholder:"请输入"},model:{value:e.createForm.path,callback:function(t){e.$set(e.createForm,"path",t)},expression:"createForm.path"}})],1),e.fileVisible?a("div",[a("el-form-item",{attrs:{label:"端口号",prop:"port"}},[a("el-input",{attrs:{disabled:!e.bottonShow,placeholder:"请输入"},model:{value:e.createForm.port,callback:function(t){e.$set(e.createForm,"port",t)},expression:"createForm.port"}})],1)],1):e._e(),e.fileVisible||e.databaseVisible?a("div",[a("el-form-item",{attrs:{label:"用户名",prop:"uname"}},[a("el-input",{attrs:{disabled:!e.bottonShow,placeholder:"请输入"},model:{value:e.createForm.uname,callback:function(t){e.$set(e.createForm,"uname",t)},expression:"createForm.uname"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{attrs:{disabled:!e.bottonShow,type:"password",placeholder:"请输入"},model:{value:e.createForm.pwd,callback:function(t){e.$set(e.createForm,"pwd",t)},expression:"createForm.pwd"}})],1)],1):e._e(),e.httpVisible?a("div",[a("el-form-item",{attrs:{label:"状态码字段设置",prop:"respField"}},[a("el-input",{attrs:{disabled:!e.bottonShow},model:{value:e.createForm.respField,callback:function(t){e.$set(e.createForm,"respField",t)},expression:"createForm.respField"}})],1)],1):e._e()],1),e.httpVisible?a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"fontStyle"},[e._v("状态码列表")]),a("base-table",{staticClass:"sortTable noTableBorder",attrs:{"data-source":e.statusDialogData,loading:e.loading,border:"",columns:e.statusListHead(),"show-summary":!1,"can-edit":e.bottonShow}}),a("div",{staticClass:"fontStyle"},[e._v("请求头参数列表")]),a("base-table",{ref:"paraentTable",staticClass:"sortTable noTableBorder",attrs:{border:"","data-source":e.columnsData,loading:e.loading,columns:e.columns(),"show-summary":!1,"can-edit":e.bottonShow}})],1):e._e(),e.bottonShow?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancelData()}}},[e._v(e._s(e.cancelText))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveData("createForm")}}},[e._v(e._s(e.saveText))])],1):e._e()],1)],1)},r=[],l=(a("4160"),a("fb6a"),a("a434"),a("b0c0"),a("159b"),a("d4ec")),o=a("bee2"),n=a("262e"),s=a("2caf"),c=a("9ab4"),d=a("60a3"),u=function(e){Object(n["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.statusDialogData=[{id:1,code:"",desc:"",isNormal:"",addButton:!0}],e.columnsData=[{id:1,key:"",value:"",addButton:!0}],e.fileVisible=!1,e.databaseVisible=!1,e.httpVisible=!1,e.nameType="",e.paramsList="",e.subTypeChange="",e.pathType="",e.connectorList=[],e.addList=[{form:{},respCodes:[],headers:[]}],e.createForm={name:"",subType:"",path:"",uname:"",pwd:"",localMenu:"",domainPath:"",port:"",numberDef:"",respField:""},e.rules={name:[{required:!0,message:"请输入连接器名称",trigger:"blur"}],viewName:[{required:!0,message:"请输入数据库名称",trigger:"change"}],localMenu:[{required:!0,message:"请输入根目录",trigger:"blur"}],subType:[{required:!0,message:"请选择",trigger:"change"}],path:[{required:!0,message:"请输入连接地址",trigger:"blur"}],uname:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],domainPath:[{required:!0,message:"请输入连接域名地址",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"}]},e}return Object(o["a"])(a,[{key:"saveCreat",value:function(){return this.paramsList}},{key:"cancelCreat",value:function(){}},{key:"typeChange",value:function(){this.changButton(),this.listChange()}},{key:"editBut",value:function(){if(!0===this.editButChange){var e=this.rowData;this.editData(e),this.changButton()}}},{key:"statusListHead",value:function(){var e=this,t=this.bottonShow?[{prop:"code",label:"状态码",align:"center",showOverflowTooltip:!0,"min-width":"100",editer:{type:"input",key:"code",placeholder:"请输入字段code"}},{prop:"desc",label:"描述",align:"center",showOverflowTooltip:!0,"min-width":"100",editer:{type:"input",key:"desc",placeholder:"请输入字段code"}},{prop:"isNormal",label:"是否异常",align:"center",showOverflowTooltip:!0,"min-width":"100",editer:{type:"select",key:"isNormal",config:{props:{placeholder:"请选择字段类型",clearable:!0,"collapse-tags":!0,filterable:!0},options:function(){return[{text:"正常",value:"0"},{text:"异常",value:"1"}]}}}}]:[{prop:"code",label:"状态码",align:"center",showOverflowTooltip:!0,"min-width":"100"},{prop:"desc",label:"描述",align:"center",showOverflowTooltip:!0,"min-width":"100"},{prop:"isNormal",label:"是否异常",align:"center",showOverflowTooltip:!0,"min-width":"100"}];return this.bottonShow&&t.unshift({prop:"",label:"操作",align:"center",showOverflowTooltip:!0,"min-width":"100",fixed:"right",render:function(t,a){var i=a.record;return!0===i.addButton?t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEdit(i)}}},"删除"),t("span",{style:"padding: 0 5px"},"|"),t("el-button",{props:{type:"text"},on:{click:function(){return e.addEdit(i)}}},"添加")]):t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEdit(i)}}},"删除")])}}),t}},{key:"columns",value:function(){var e=this,t=this.bottonShow?[{prop:"key",label:"参数key",align:"center",showOverflowTooltip:!0,"min-width":"100",editer:{type:"input",key:"key",placeholder:"请输入字段code"}},{prop:"value",label:"参数value",align:"center",showOverflowTooltip:!0,"min-width":"100",editer:{type:"input",key:"value",placeholder:"请输入字段code"}}]:[{prop:"key",label:"参数key",align:"center",showOverflowTooltip:!0,"min-width":"100"},{prop:"value",label:"参数value",align:"center",showOverflowTooltip:!0,"min-width":"100"}];return this.bottonShow&&t.unshift({prop:"",label:"操作",align:"center",showOverflowTooltip:!0,"min-width":"100",fixed:"right",render:function(t,a){var i=a.record;return!0===i.addButton?t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEditCol(i)}}},"删除"),t("span",{style:"padding: 0 5px"},"|"),t("el-button",{props:{type:"text"},on:{click:function(){return e.addEditCol(i)}}},"添加")]):t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEditCol(i)}}},"删除")])}}),t}},{key:"listChange",value:function(){this.fileVisible=!1,this.databaseVisible=!1,this.httpVisible=!1,"0"===this.type?(this.subTypeChange="数据库类型",this.nameType="连接器名称",this.pathType="连接地址",this.databaseVisible=!0,this.connectorList=[{value:0,text:"Oracle"},{value:1,text:"Mysql"}]):"1"===this.type?(this.subTypeChange="连接器类型",this.nameType="连接器名称",this.pathType="服务地址",this.httpVisible=!0,this.connectorList=[{value:0,text:"Restful"},{value:1,text:"WebService"}]):"2"===this.type&&(this.subTypeChange="文档库类型",this.nameType="文档库名称",this.pathType="连接地址",this.fileVisible=!0,this.connectorList=[{value:0,text:"Ftp"},{value:1,text:"远程目录"}])}},{key:"editData",value:function(e){this.createForm.name=e.name,this.createForm.subType=e.subType,this.createForm.localMenu=e.localMenu,this.createForm.path=e.path,this.createForm.uname=e.uname,this.createForm.pwd=e.pwd,this.createForm.domainPath=e.domainPath,this.createForm.port=e.port,this.createForm.numberDef=e.numberDef,this.createForm.respField=e.respField,"1"===this.type&&(e.respCodes.length>0?this.statusDialogData=e.respCodes:this.statusDialogData=[{id:1,code:"",desc:"",isNormal:"",addButton:!0}],e.headers.length>0?this.columnsData=e.headers:this.columnsData=[{id:1,key:"",value:"",addButton:!0}])}},{key:"saveData",value:function(e){var t=this,a=this.$refs[e];a.validate((function(e){if(!e)return!1;t.addList.forEach((function(e){e.form=t.createForm,e.respCodes=t.statusDialogData,e.headers=t.columnsData}));var a={};"0"===t.type?a={name:t.createForm.name,type:0,subType:t.createForm.subType,path:t.createForm.path,uname:t.createForm.uname,pwd:t.createForm.pwd}:"1"===t.type?(a={name:t.createForm.name,type:1,subType:t.createForm.subType,path:t.createForm.path,respField:t.createForm.respField},t.statusDialogData.length>0&&t.statusDialogData[0].code?a.respCodes=t.statusDialogData:a.respCodes=[],t.columnsData.length>0&&t.columnsData[0].key?a.headers=t.columnsData:a.headers=[]):"2"===t.type&&(a={name:t.createForm.name,type:2,subType:t.createForm.subType,path:t.createForm.path,localMenu:t.createForm.localMenu,uname:t.createForm.uname,pwd:t.createForm.pwd,port:t.createForm.port}),t.paramsList=a,t.saveCreat(),t.cancelData()}))}},{key:"cancelData",value:function(){var e=this.$refs["createForm"];e.resetFields(),this.cancelCreat(),this.createForm.name="",this.createForm.subType="",this.createForm.localMenu="",this.createForm.path="",this.createForm.uname="",this.createForm.pwd="",this.createForm.domainPath="",this.createForm.port="",this.createForm.numberDef="",this.createForm.respField="",this.statusDialogData=[{id:1,code:"",desc:"",isNormal:"",addButton:!0}],this.columnsData=[{id:1,key:"",value:"",addButton:!0}]}},{key:"deleteEditCol",value:function(e){var t=this;if(this.columnsData.length>1){for(var a=0;a<this.columnsData.length;a++)this.columnsData[a].id===e.id&&this.columnsData.splice(a,1);var i=this.columnsData.slice(-1);i.forEach((function(e){t.$set(e,"addButton",!0)}))}}},{key:"addEditCol",value:function(e){var t=this,a=Object.assign({},e);for(var i in a)"id"===i?a[i]=a[i]+1:"edits"!==i&&(a[i]="");this.columnsData.push(a),this.columnsData.length>1&&this.columnsData.forEach((function(e){t.$delete(e,"addButton")}));var r=this.columnsData.slice(-1);r.forEach((function(e){t.$set(e,"addButton",!0)}))}},{key:"changButton",value:function(){var e=this,t=this.columnsData.slice(-1);t.forEach((function(t){e.$set(t,"addButton",!0)}));var a=this.statusDialogData.slice(-1);a.forEach((function(t){e.$set(t,"addButton",!0)}))}},{key:"addEdit",value:function(e){var t=this,a=Object.assign({},e);for(var i in a)"id"===i?a[i]=a[i]+1:"edits"!==i&&(a[i]="");this.statusDialogData.push(a),this.statusDialogData.length>1&&this.statusDialogData.forEach((function(e){t.$delete(e,"addButton")}));var r=this.statusDialogData.slice(-1);r.forEach((function(e){t.$set(e,"addButton",!0)}))}},{key:"deleteEdit",value:function(e){var t=this;if(this.statusDialogData.length>1){for(var a=0;a<this.statusDialogData.length;a++)this.statusDialogData[a].id===e.id&&this.statusDialogData.splice(a,1);var i=this.statusDialogData.slice(-1);i.forEach((function(e){t.$set(e,"addButton",!0)}))}}},{key:"created",value:function(){this.listChange()}}]),a}(d["e"]);Object(c["a"])([Object(d["c"])(String)],u.prototype,"dialogTitle",void 0),Object(c["a"])([Object(d["c"])({default:!1})],u.prototype,"dialogVisible",void 0),Object(c["a"])([Object(d["c"])({default:!1})],u.prototype,"bottonShow",void 0),Object(c["a"])([Object(d["c"])(String)],u.prototype,"saveText",void 0),Object(c["a"])([Object(d["c"])(String)],u.prototype,"type",void 0),Object(c["a"])([Object(d["c"])(String)],u.prototype,"cancelText",void 0),Object(c["a"])([Object(d["c"])(String)],u.prototype,"dialogWidth",void 0),Object(c["a"])([Object(d["c"])(String)],u.prototype,"rowData",void 0),Object(c["a"])([Object(d["c"])({default:!1})],u.prototype,"editButChange",void 0),Object(c["a"])([Object(d["b"])("saveEmit")],u.prototype,"saveCreat",null),Object(c["a"])([Object(d["b"])("cancelEmit")],u.prototype,"cancelCreat",null),Object(c["a"])([Object(d["f"])("type",{immediate:!0})],u.prototype,"typeChange",null),Object(c["a"])([Object(d["f"])("editButChange",{immediate:!0})],u.prototype,"editBut",null),u=Object(c["a"])([Object(d["a"])({components:{}})],u);var p=u,h=p,f=(a("6303"),a("2877")),m=Object(f["a"])(h,i,r,!1,null,null,null);t["a"]=m.exports},"341f":function(e,t,a){},"4cda":function(e,t,a){},"5b71":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("4160"),a("b0c0"),a("159b");var i=a("5c96");function r(e,t){var a=[],r=!1;return null!==e&&e.forEach((function(e){e.code||e.name||e.type||e.required||e.defaultValue?3!==e.required||e.defaultValue?(e.code||e.name)&&e.code&&e.name?!e.name&&e.code?(r=!0,Object(i["MessageBox"])("是否要将参数code作为参数名称?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){e.name=e.code})).catch((function(){Object(i["Message"])({type:"info",message:"已取消"})}))):""===e.required||null===e.required||void 0===e.required?(r=!0,i["Message"].error("是否必传为不能为空，请输入")):""!==e.type&&null!==e.type&&void 0!==e.type||(r=!0,i["Message"].error("参数类型不能为空，请输入")):(r=!0,i["Message"].error("参数code，参数名称不能为空，请输入")):(r=!0,i["Message"].error("是否必传为固定值，默认值不能为空，请输入默认值")):r=!1})),t.forEach((function(e){!e.fieldName&&e.fieldCode?(r=!0,Object(i["MessageBox"])("是否要将字段code作为字段名称?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){e.fieldName=e.fieldCode})).catch((function(){Object(i["Message"])({type:"info",message:"已取消"})}))):(e.fieldCode||e.fieldName)&&e.fieldCode&&e.fieldName?""===e.fieldType||null===e.fieldType||void 0===e.fieldType?(r=!0,i["Message"].error("字段类型不能为空")):0===e.isPrimaryKey&&a.push(e):(r=!0,i["Message"].error("字段code,字段名称不能为空"))})),t[0].fieldCode&&t[0].fieldName&&t[0].fieldType&&0===a.length&&(r=!0,i["Message"].error("字段列表必须存在主键")),r}},"5ce5":function(e,t,a){"use strict";var i=a("4cda"),r=a.n(i);r.a},6303:function(e,t,a){"use strict";var i=a("341f"),r=a.n(i);r.a},7504:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("simple-dialog",{ref:"advance",attrs:{"dialog-title":"测试参数编辑器","dialog-visible":e.dialogTestSwitch,"dialog-width":"600px","botton-show":"true","save-text":"测试","cancel-text":"取消"},on:{saveEmit:e.treeDataTest,cancelEmit:e.cancelSwitch}},[a("AdvancedScreening",{attrs:{spread:e.spread.visible,model:e.spread.model,items:e.spread.items,"label-width":"30%","screen-loading":e.spread.loading},on:{adsfrom:e.adsfrom,doQuery:e.handleQuery,doReset:e.handleReset}})],1)],1)},r=[],l=(a("4160"),a("b0c0"),a("159b"),a("d4ec")),o=a("bee2"),n=a("262e"),s=a("2caf"),c=a("9ab4"),d=a("60a3"),u=a("d2a6"),p=function(e){Object(n["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.spread={visible:!0,model:{},items:[],loading:!1},e.testForm="",e}return Object(o["a"])(a,[{key:"treeTest",value:function(){}},{key:"cancelSwitch",value:function(){}},{key:"getVisible",value:function(e){var t=[],a={};e.forEach((function(e){a[e.code]=e.defaultValue,3===e.type?t.push({key:e.code,label:e.name?e.name:e.code,type:"switch",required:e.required,rule:{required:!0,message:"请选择"+e.name,trigger:"blur"}}):2===e.type?t.push({key:e.code,label:e.name?e.name:e.code,type:"date",TimePickerOptions:"",required:e.required,rule:{required:!0,message:"请选择"+e.name,trigger:"change"},clearable:!0,disabled:!1}):t.push({type:"input",key:e.code,label:e.name?e.name:e.code,required:e.required,rule:{required:!0,message:"请输入"+e.name,trigger:"change"},placeholder:"请输入",config:{props:{type:1===e.type?"number":"input"}}})})),this.spread.items=t,this.spread.model=a}},{key:"adsfrom",value:function(e){this.testForm=e}},{key:"treeDataTest",value:function(){var e=this;this.testForm.validate((function(t){if(!t)return!1;e.treeTest()}))}}]),a}(d["e"]);Object(c["a"])([Object(d["c"])(Array)],p.prototype,"paramsList",void 0),Object(c["a"])([Object(d["c"])({default:!1})],p.prototype,"dialogTestSwitch",void 0),Object(c["a"])([Object(d["b"])("saveEmitSwitch")],p.prototype,"treeTest",null),Object(c["a"])([Object(d["b"])("cancelEmitSwitch")],p.prototype,"cancelSwitch",null),Object(c["a"])([Object(d["f"])("paramsList",{immediate:!0,deep:!0})],p.prototype,"getVisible",null),p=Object(c["a"])([Object(d["a"])({components:{AdvancedScreening:u["a"]}})],p);var h=p,f=h,m=a("2877"),b=Object(m["a"])(f,i,r,!1,null,null,null);t["a"]=b.exports},"9b9d":function(e,t,a){"use strict";var i=a("efe0"),r=a.n(i);r.a},a623:function(e,t,a){"use strict";var i=a("23e7"),r=a("b727").every,l=a("a640"),o=a("ae40"),n=l("every"),s=o("every");i({target:"Array",proto:!0,forced:!n||!s},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},d2a6:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.screenLoading,expression:"screenLoading"}],ref:"adsfrom",staticClass:"formCss labelSuffix",attrs:{"label-width":e.labelWidth,model:e.model,rules:e.rules,size:"medium","label-suffix":"："}},e._l(e.items,(function(t){return a("div",{key:t.key,staticClass:"box"},[a("el-form-item",{attrs:{label:t.label,prop:t.key}},["date"===t.type?a("el-date-picker",{attrs:{type:t.type,"picker-options":t.TimePickerOptions,clearable:t.clearable,disabled:t.disabled,format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.model[t.key],callback:function(a){e.$set(e.model,t.key,a)},expression:"model[item.key]"}}):"switch"===t.type?a("el-switch",{model:{value:e.model[t.key],callback:function(a){e.$set(e.model,t.key,a)},expression:"model[item.key]"}}):a("item-render",{attrs:{type:t.type,config:Object.assign({},{placeholder:t.placeholder||""},t.config,{model:e.model,key:t.key})}})],1)],1)})),0)],1)},r=[],l=(a("4160"),a("159b"),a("f9c8")),o={name:"AdvancedScreening",components:{"item-render":l["a"]},props:{spread:{type:Boolean},model:{type:Object,default:function(){}},items:{type:Array,default:function(){return[]}},labelWidth:{type:String,default:function(){return""}},screenLoading:{type:Boolean,default:!1}},data:function(){return{rules:{},boxBtnStyle:""}},created:function(){this.initRules()},watch:{items:function(){this.initRules()}},methods:{initRules:function(){var e=this,t={};this.items.forEach((function(e){e.rule&&0===e.required&&(t[e.key]=e.rule)})),this.rules=t,this.$nextTick((function(){e.$emit("adsfrom",e.$refs.adsfrom)}))}}},n=o,s=a("2877"),c=Object(s["a"])(n,i,r,!1,null,null,null);t["a"]=c.exports},d7e7:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"treeTableList"},[a("el-row",{ref:"treeLists",attrs:{gutter:"20"}},[e.hasTree?a("el-col",{staticClass:"twoTypeLeft",attrs:{span:8}},[a("note-card",{attrs:{title:"报文结构","sub-title":"拖动节点添加字段"}},[a("el-tree",{ref:"productTree",staticClass:"filter-tree",staticStyle:{height:"200px"},attrs:{data:e.dataList,height:"370px",props:e.defaultProps,draggable:"","allow-drop":e.allowDrop,"filter-node-method":e.filterNode},on:{"node-drag-start":e.dataDragStart}})],1)],1):e._e(),a("el-col",{attrs:{span:e.hasTree?16:24}},[a("div",{attrs:{draggable:!0},on:{dragover:function(e){return e.preventDefault()},dragenter:function(e){return e.preventDefault()},drop:function(t){return e.handleSomethingDrop(e.item)}}},[a("base-table",{staticClass:"sortTable",staticStyle:{"min-height":"242px"},attrs:{border:"","data-source":e.treeDataList,loading:e.loading,columns:e.treeListTable,"show-summary":!1,"border-style":!0,"can-edit":""},on:{cellMouseEnter:e.cellMouseEnter,cellMouseleave:e.cellMouseleave}})],1)])],1),a("simple-dialog",{attrs:{"dialog-title":"关联字段设置","dialog-visible":e.dialogVisible,"dialog-width":"400px","botton-show":"true","save-text":"确定","cancel-text":"取消"},on:{saveEmit:e.setDetermines,cancelEmit:e.cancelDialog}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("el-input",{staticClass:"inputSearch",attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:e.searchView,callback:function(t){e.searchView=t},expression:"searchView"}}),a("el-button",{staticStyle:{padding:"5px 8px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.changeSearch}},[e._v("搜索")])],1),a("el-tree",{staticClass:"treeStyle",attrs:{data:e.dataViewsTree,props:e.treeProps},on:{"node-click":e.handleNodeClick}})],1)],1)},r=[],l=(a("a623"),a("4160"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("159b"),a("2909")),o=a("5530"),n=a("d4ec"),s=a("bee2"),c=a("262e"),d=a("2caf"),u=a("9ab4"),p=a("60a3"),h=a("2ef0"),f=a("ca00"),m=a("cb9b"),b=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.dialogVisible=!1,e.delButton=!1,e.searchView="",e.treeName="",e.treeCode="",e.parameterId=0,e.treeId=0,e.parameterCode="",e.treeProps={children:"fields",label:"fieldName"},e.tempList=[],e.currentNode="",e.dragTableData=[],e.treeTableData=[],e.dataViewsTree=[],e.tableList=[{id:1,fieldCode:"",fieldName:"",fieldType:"",foreignFieldCode:"",foreignId:"",isPrimaryKey:1,addButton:!0,edits:[1,1,1,1,0,0,0]}],e.defaultProps={label:"fieldCode",value:"fieldCode"},e}return Object(s["a"])(a,[{key:"WatchIsCompatible",value:function(){"0"===this.isCompatible?this.delButton=!0:this.delButton=!1}},{key:"treeTable",value:function(){var e=this;return[{prop:"",type:"index",align:"center",label:"序号",width:"70"},{prop:"fieldCode",label:"字段code","header-align":"left","min-width":"100"},{prop:"fieldName",label:"字段名称","header-align":"left","min-width":"100",editer:{type:"input",key:"fieldName",placeholder:"请输入字段名称"}},{prop:"fieldType","header-align":"left",label:"字段类型","min-width":"120",editer:{type:"select",key:"fieldType",config:{props:{placeholder:"请选择字段类型"},options:function(){return[{label:"字符串",value:0},{label:"数字",value:1},{label:"日期",value:2},{label:"布尔",value:3}]}}}},{prop:"foreignFieldCode",label:"关联视图",align:"center","min-width":"100",render:function(t,a){var i=a.record;return!0===i.treeCode?t("span",[t("span",i.foreignFieldName),t("el-button",{props:{type:"text",icon:"el-icon-delete"},style:"margin-left: 10px",on:{click:function(){return e.deleteFiled(i)}}})]):!0===i.treeButton?t("span",i.foreignFieldName):t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.setFiled(i)}}},"设置")])}},{prop:"isPrimaryKey",label:"是否主键","header-align":"left","min-width":"100",render:function(t,a){var i=a.$index,r=a.record;return t("el-switch",{props:{value:r.isPrimaryKey,"active-value":0,"inactive-value":1,"active-text":"是","inactive-text":"否"},on:{change:function(){return e.changKey(r,i)}}})}},{prop:"",align:"center",label:"操作",width:"100",headerAlign:"center",render:function(t,a){var i=a.$index;return t("span",[t("el-button",{props:{type:"text",disabled:e.delButton},on:{click:function(){return e.handleDelete(i)}}},"删除")])}}]}},{key:"allowDrop",value:function(e,t,a){return e.level===t.level&&(e.parent.id===t.parent.id?"prev"===a:void 0)}},{key:"changKey",value:function(e,t){this.treeDataList.splice(t,1,Object(o["a"])(Object(o["a"])({},e),{},{isPrimaryKey:1-e.isPrimaryKey}))}},{key:"dataDragStart",value:function(e){this.dragNodeData=e}},{key:"handleSomethingDrop",value:function(){this.dragNodeData.data&&this.handleData(this.dragNodeData)}},{key:"handleData",value:function(e){var t=this;if(e.childNodes&&e.childNodes.length>0)e.childNodes.forEach((function(e){t.handleData(e)}));else{var a=Object(h["cloneDeep"])(e.data);a.rule=this.getNodeParents(e);var i=Object(f["a"])(this.treeTableData,"fieldCode",a.fieldCode);if(i){if(i.rule.length===a.rule.length&&i.rule.every((function(e,t){return e.node===a.rule[t]["node"]})))return void this.$message({type:"warning",message:"字段重复"});a.rule.length>1?a.fieldCode=a.rule.map((function(e){return e.node})).join(""):a.fieldCode+=Object(f["h"])().substr(0,3)}this.treeTableData.push(a),this.treeTableData.forEach((function(e,a){e.fieldCode||t.treeTableData.splice(a,1)}))}}},{key:"getNodeParents",value:function(e){var t=[],a=e.data;return a&&a.fieldCode&&"items"!==a.fieldCode&&t.unshift({node:a.fieldCode,type:"array"===a.type?"1":"0"}),e.parent&&t.unshift.apply(t,Object(l["a"])(this.getNodeParents(e.parent))),t}},{key:"handleDelete",value:function(e){var t=this;this.$confirm("是否删除这条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.$message({type:"success",message:"删除成功!"}),t.treeDataList.splice(e,1)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},{key:"addEdit",value:function(e){var t=this,a=Object.assign({},e);for(var i in a)"id"===i?a[i]=a[i]+1:"edits"!==i&&(a[i]="");this.treeDataList.push(a),this.treeDataList.length>1&&this.treeDataList.forEach((function(e){t.$delete(e,"addButton")}));var r=this.treeDataList.slice(-1);r.forEach((function(e){t.$set(e,"addButton",!0)}))}},{key:"deleteEdit",value:function(e){var t=this;this.treeDataList.length>1&&this.$confirm("是否删除这条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.$message({type:"success",message:"删除成功!"});for(var a=0;a<t.treeDataList.length;a++)t.treeDataList[a].id===e.id&&t.treeDataList.splice(a,1);var i=t.treeDataList.slice(-1);i.forEach((function(e){t.$set(e,"addButton",!0)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},{key:"setFiled",value:function(e){this.parameterId=e.id,this.parameterCode=e.fieldCode,this.dialogVisible=!0}},{key:"handleNodeClick",value:function(e){this.treeId=e.id,this.treeName=e.fieldName,this.treeCode=e.fieldCode}},{key:"setDetermines",value:function(){var e=this;this.treeId&&this.treeName?(this.treeDataList.forEach((function(t){t.id?t.id===e.parameterId&&(t.foreignId=e.treeId,t.foreignFieldCode=e.treeCode,t.foreignFieldName=e.treeName,e.$set(t,"treeButton",!0)):t.fieldCode===e.parameterCode&&(t.foreignId=e.treeId,t.foreignFieldCode=e.treeCode,t.foreignFieldName=e.treeName,e.$set(t,"treeButton",!0))})),this.dialogVisible=!1):this.$message.error("请选择关联字段")}},{key:"cancelDialog",value:function(){this.dialogVisible=!1}},{key:"deleteFiled",value:function(e){var t=this;this.$confirm("确定要删除该关联字段吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.$delete(e,"treeButton"),t.$delete(e,"treeCode"),e.foreignFieldCode="",e.foreignFieldName="",e.foreignName="",e.foreignId=""})).catch((function(){}))}},{key:"cellMouseEnter",value:function(e,t){"foreignFieldCode"===t.property&&e.foreignFieldCode&&(this.$delete(e,"treeButton"),this.$set(e,"treeCode",!0))}},{key:"cellMouseleave",value:function(e){e.foreignFieldCode&&(this.$delete(e,"treeCode"),this.$set(e,"treeButton",!0))}},{key:"queryDataViewsFields",value:function(){var e=this;Object(m["e"])({dictFlag:"0"}).then((function(t){var a=t.data;a&&(a.forEach((function(e){e.fieldName=e.name})),e.dataViewsTree=a)}))}},{key:"changeSearch",value:function(){var e=this,t={dictFlag:"0",type:"0",searchName:this.searchView};Object(m["e"])(t).then((function(t){var a=t.data;a&&(a.forEach((function(e){e.fieldName=e.name})),e.dataViewsTree=a)}))}},{key:"created",value:function(){this.queryDataViewsFields()}},{key:"treeListTable",get:function(){var e=this;this.dragTableData=this.dataList;var t=this.treeTable(),a=[];return this.dataList.length&&this.dataList.forEach((function(e){e.fieldCode||a.push(e)})),(0===this.dataList.length||a.length>0)&&(t[1].editer={type:"input",key:"fieldCode",placeholder:"请输入字段code"},t[6].render=function(t,a){var i=a.record;return!0===i.addButton?t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEdit(i)}}},"删除"),t("span",{style:"padding: 0 5px"},"|"),t("el-button",{props:{type:"text"},on:{click:function(){return e.addEdit(i)}}},"添加")]):t("span",[t("el-button",{props:{type:"text"},on:{click:function(){return e.deleteEdit(i)}}},"删除")])}),t}},{key:"treeDataList",get:function(){var e=this.tableList;return this.dataList.length>0&&(this.hasTree?(this.editTree&&this.editTree.length>0&&(!0===this.testChange?this.treeTableData=this.tableList:this.treeTableData=this.editTree),e=this.treeTableData):e=this.dataList,e.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"isPrimaryKey")||(e.isPrimaryKey=1),e.rule||(e.rule=[]),e.edits=[0,1,1,1,0,0,0]}))),e}}]),a}(p["e"]);Object(u["a"])([Object(p["c"])(Array)],b.prototype,"dataList",void 0),Object(u["a"])([Object(p["c"])({default:"1"})],b.prototype,"isCompatible",void 0),Object(u["a"])([Object(p["c"])(Boolean)],b.prototype,"hasTree",void 0),Object(u["a"])([Object(p["c"])({default:"0"})],b.prototype,"pushData",void 0),Object(u["a"])([Object(p["c"])(Boolean)],b.prototype,"testChange",void 0),Object(u["a"])([Object(p["c"])(Array)],b.prototype,"editTree",void 0),Object(u["a"])([Object(p["f"])("isCompatible",{immediate:!0})],b.prototype,"WatchIsCompatible",null),b=Object(u["a"])([Object(p["a"])({})],b);var y=b,g=y,v=(a("5ce5"),a("2877")),D=Object(v["a"])(g,i,r,!1,null,null,null);t["a"]=D.exports},efe0:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6c3d8910.9773f07a.js.map