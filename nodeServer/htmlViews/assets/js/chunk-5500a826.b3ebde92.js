(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5500a826"],{"0dbb":function(e,t,i){},"15c0":function(e,t,i){},"1cd2":function(e,t,i){"use strict";var n=i("2a3b"),a=i.n(n);a.a},"2a3b":function(e,t,i){},"4b25":function(e,t,i){"use strict";i("d3b7");var n=i("5530"),a=(i("0644"),i("fd85")),s=i("d547"),r=i("2f62");t["a"]={data:function(){return{trees:[],actionFlag:{},roleLoading:!1,roleList:[],roleTotal:null,roleQueryStr:"",roleCurrpage:1,rolePageSize:10,deptId:"",departAll:"",departments:[],offices:[],office:"",deptProps:{value:"id",label:"deptName"},locked:"",userQueryStr:"",userType:"个人",userCurrpage:1,userPageSize:10,userTotal:null,userList:[],userLoading:!1,isOne:!0,roleGroupId:""}},computed:Object(n["a"])({},Object(r["e"])({userId:function(e){return e.user.userInfo.id}})),methods:{getRoleList:function(){var e=this;this.roleLoading=!0;var t={page:this.roleCurrpage,limit:this.rolePageSize};return this.roleQueryStr&&""!==this.roleQueryStr&&(t.queryStr=this.roleQueryStr),new Promise((function(i,n){Object(a["J"])(t).then((function(t){var n=t.data,a=t.error;e.roleLoading=!1,a?e.$message.error({message:"查询角色失败!".concat(a.message)}):(e.roleList=n.rows,e.roleTotal=n.total,i())}))}))},getUsers:function(){var e=this;this.userLoading=!0;var t={page:this.userCurrpage,limit:this.userPageSize};return this.deptId&&""!==this.deptId&&(t.deptId=this.deptId),""!==this.locked&&(t.locked=this.locked),""!==this.userQueryStr&&(t.keyWord=this.userQueryStr),new Promise((function(i){Object(a["P"])(t).then((function(t){var n=t.data;e.userLoading=!1,e.userList=n.rows,e.userTotal=n.total,i()}))}))},handleClick:function(e){this.userCurrpage=e,this.getUsers()},handleSizeChange:function(e){this.userPageSize=e,this.getUsers()},handleRoleSearchChange:function(){this.roleCurrpage=1,this.getRoleList()},handleDeptChange:function(e){var t=Object(s["b"])(this.departments,"id",e[0]);t&&t.children?this.offices=t.children:this.offices=[],this.office=""},initDeptments:function(){var e=this;Object(a["k"])().then((function(t){var i=t.data;e.departments=i}))}}}},"579d":function(e,t,i){"use strict";i("99af");var n=i("5530"),a=i("53ca"),s=i("b85c"),r=i("2f62"),o=i("0644"),l=i.n(o);function c(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(s["a"])(e);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=t[o];c&&("object"===Object(a["a"])(c)?n[o]=l()(c):n[o]=c)}}catch(u){r.e(u)}finally{r.f()}return n}t["a"]=function(e,t,i){return{computed:{moduleName:function(){return"".concat(this.$route.path).concat(t?"_"+t:"")},cacheParams:function(){return this.$store.state.dataCache.params[this.moduleName]}},methods:Object(n["a"])(Object(n["a"])({},Object(r["d"])(["SET_CACHE_PARAMS"])),{},{cacheParamData:function(){this.SET_CACHE_PARAMS({moduleName:this.moduleName,params:c(e,this)})},recoveryDataParams:function(){this.cacheParams&&(c(e,this.cacheParams,this),i||this.SET_CACHE_PARAMS({moduleName:this.moduleName}))}}),created:function(){this.recoveryDataParams()}}}},6062:function(e,t,i){"use strict";var n=i("6d61"),a=i("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,i){"use strict";var n=i("9bf2").f,a=i("7c73"),s=i("e2cc"),r=i("0366"),o=i("19aa"),l=i("2266"),c=i("7dd0"),u=i("2626"),d=i("83ab"),h=i("f183").fastKey,m=i("69f3"),f=m.set,p=m.getterFor;e.exports={getConstructor:function(e,t,i,c){var u=e((function(e,n){o(e,u,t),f(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&l(n,e[c],e,i)})),m=p(t),g=function(e,t,i){var n,a,s=m(e),r=v(e,t);return r?r.value=i:(s.last=r={index:a=h(t,!0),key:t,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=r),n&&(n.next=r),d?s.size++:e.size++,"F"!==a&&(s.index[a]=r)),e},v=function(e,t){var i,n=m(e),a=h(t);if("F"!==a)return n.index[a];for(i=n.first;i;i=i.next)if(i.key==t)return i};return s(u.prototype,{clear:function(){var e=this,t=m(e),i=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete i[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,i=m(t),n=v(t,e);if(n){var a=n.next,s=n.previous;delete i.index[n.index],n.removed=!0,s&&(s.next=a),a&&(a.previous=s),i.first==n&&(i.first=a),i.last==n&&(i.last=s),d?i.size--:t.size--}return!!n},forEach:function(e){var t,i=m(this),n=r(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:i.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),s(u.prototype,i?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),d&&n(u.prototype,"size",{get:function(){return m(this).size}}),u},setStrong:function(e,t,i){var n=t+" Iterator",a=p(t),s=p(n);c(e,t,(function(e,t){f(this,{type:n,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=s(this),t=e.kind,i=e.last;while(i&&i.removed)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"==t?{value:i.key,done:!1}:"values"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),u(t)}}},"6d61":function(e,t,i){"use strict";var n=i("23e7"),a=i("da84"),s=i("94ca"),r=i("6eeb"),o=i("f183"),l=i("2266"),c=i("19aa"),u=i("861d"),d=i("d039"),h=i("1c7e"),m=i("d44e"),f=i("7156");e.exports=function(e,t,i){var p=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),v=p?"set":"add",b=a[e],y=b&&b.prototype,w=b,S={},C=function(e){var t=y[e];r(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:function(e,i){return t.call(this,0===e?0:e,i),this})};if(s(e,"function"!=typeof b||!(g||y.forEach&&!d((function(){(new b).entries().next()})))))w=i.getConstructor(t,e,p,v),o.REQUIRED=!0;else if(s(e,!0)){var T=new w,k=T[v](g?{}:-0,1)!=T,x=d((function(){T.has(1)})),$=h((function(e){new b(e)})),_=!g&&d((function(){var e=new b,t=5;while(t--)e[v](t,t);return!e.has(-0)}));$||(w=t((function(t,i){c(t,w,e);var n=f(new b,t,w);return void 0!=i&&l(i,n[v],n,p),n})),w.prototype=y,y.constructor=w),(x||_)&&(C("delete"),C("has"),p&&C("get")),(_||k)&&C(v),g&&y.clear&&delete y.clear}return S[e]=w,n({global:!0,forced:w!=b},S),m(w,e),g||i.setStrong(w,e,p),w}},bb2f:function(e,t,i){var n=i("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bd946:function(e,t,i){"use strict";var n=i("15c0"),a=i.n(n);a.a},d547:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return s}));i("99af"),i("4de4"),i("4160"),i("a630"),i("d81d"),i("d3b7"),i("ac1f"),i("25f0"),i("6062"),i("3ca3"),i("5319"),i("159b"),i("ddb0"),i("c1df"),i("ca00"),i("c24f");function n(e,t,i){for(var n=0;n<e.length;n+=1)if(e[n][t]===i)return e[n]}function a(e,t,i){for(var n=0;n<e.length;n+=1){var s=e[n];if(s.children){var r=a(s.children,t,i);if(r)return r}else if(e[n][t]===i)return e[n]}}function s(e,t){var i=new Set(t),n=Array.from(new Set(e.filter((function(e){return i.has(e)}))));return n}},e981:function(e,t,i){"use strict";var n=i("0dbb"),a=i.n(n);a.a},ea4e:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-detail menu-manage"},[i("base-panel",{staticClass:"menu-list-wrap",attrs:{"no-title":e.noTitle}},[i("div",{staticClass:"left-item-header"},[i("span",{staticClass:"item-header-icon"},[e._v("菜单列表")]),i("el-button",{staticStyle:{float:"right","margin-top":"10px"},on:{click:e.handleInitMenu}},[e._v("初始化")])],1),i("div",{staticClass:"role-list"},[i("div",{staticClass:"role-list-title"},[i("div",{staticStyle:{width:"100%",display:"inline-block"}},[i("el-input",{staticClass:"showBackground",staticStyle:{width:"300px"},attrs:{placeholder:"请输入过滤条件","auto-complete":"on"},model:{value:e.menuTreeStr,callback:function(t){e.menuTreeStr=t},expression:"menuTreeStr"}},[i("div",{ref:"inputColor1",staticClass:"backgroundChange",attrs:{slot:"suffix"},slot:"suffix"},[i("icon",{staticClass:"icon",attrs:{name:"icon_search"}})],1)])],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"role-list-tree"},[i("el-tree",{key:"menuTree",ref:"menuTree",attrs:{"default-expand-all":!0,data:e.trees,props:e.defaultProps,"node-key":"id","current-node-key":e.menu,"render-after-expand":!1,"default-expanded-keys":e.defaultProExpands,"default-checked-keys":e.menus,"filter-node-method":e.filterNode},on:{"check-change":e.handleActionsChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("div",{staticClass:"item-warp"},[i("div",{staticClass:"info-item",on:{click:function(t){e.stopPropagationEvent(e.event,a,n.label),e.authPage(a)}}},[i("div",{staticClass:"label"},[e.isEdit[a.$treeNodeId]?e._e():i("span",{staticClass:"menu-title"},[e._v(e._s(n.label)+" ")]),e.isEdit[a.$treeNodeId]?i("el-input",{staticClass:"showBackground",staticStyle:{width:"170px"},attrs:{"auto-complete":"on",placeholder:n.label,minlength:"1"},model:{value:e.editTitleStr[a.$treeNodeId],callback:function(t){e.$set(e.editTitleStr,a.$treeNodeId,t)},expression:"editTitleStr[data.$treeNodeId]"}}):e._e(),e.isEdit[a.$treeNodeId]?e._e():i("div",{staticClass:"icon-wrap",on:{click:function(){return!1}}},[i("el-tooltip",{staticClass:"item ",attrs:{effect:"dark",content:"编辑",enterable:!1,placement:"top"}},[i("span",{staticClass:"menu-item-icon",on:{click:function(){e.showMenus(a,n,e.event)}}},[i("svg-icon",{staticClass:"icon icon_edit",attrs:{"icon-class":"icon_edit",name:"icon_edit"}})],1)])],1),e.isEdit[a.$treeNodeId]?i("div",{staticClass:"icon-wrap",staticStyle:{display:"inline-block"},on:{click:function(){return!1}}},[i("el-tooltip",{staticClass:"item ",attrs:{effect:"dark",content:"确认编辑",enterable:!1,placement:"top"}},[i("span",{staticClass:"menu-item-icon",staticStyle:{"margin-right":"10px"},on:{click:function(){e.saveEdit(a)}}},[i("svg-icon",{staticClass:"icon icon_correct",attrs:{"icon-class":"icon_correct",name:"icon_correct"}})],1)]),i("el-tooltip",{staticClass:"item",attrs:{enterable:!1,effect:"dark",content:"取消编辑",placement:"bottom"}},[i("span",{staticClass:"menu-item-icon",on:{click:function(){e.isEdit=[],e.editTitleStr=[]}}},[i("svg-icon",{staticClass:"icon icon_cross",staticStyle:{width:"12px",height:"12px"},attrs:{"icon-class":"icon_cross",name:"icon_cross"}})],1)])],1):e._e()],1)])])}}])})],1)])]),i("div",{staticClass:"menu-content-wrap"},[i("addPage",{attrs:{"add-boolean":e.addBoolean,"auth-page":e.authPage,"actions-menu-list":e.actionsMenuList,menu:e.menu,actions:e.actions,"action-list":e.actionList,label:e.label,"is-show-btn":e.isShowBtn,"is-show-private-region":e.isShowPrivateRegion,activeName:e.activeName,memberList:e.memberList,userTotal:e.userTotal,page:e.page,limit:e.limit},on:{"update:activeName":function(t){e.activeName=t},"update:active-name":function(t){e.activeName=t},"update:memberList":function(t){e.memberList=t},"update:member-list":function(t){e.memberList=t},"update:userTotal":function(t){e.userTotal=t},"update:user-total":function(t){e.userTotal=t},"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t}}})],1)],1)},a=[],s=(i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("5319"),i("159b"),i("53ca")),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-page panelPadd"},[i("base-panel",{attrs:{"no-title":""}},[i("div",{staticClass:"panelPadd"},[i("div",{staticClass:"table-common table-three "},[i("base-table-panel",{staticClass:"sortTable noTableBorder ",attrs:{title:e.label,height:362,"data-source":e.memberList,loading:e.loading,columns:"userMember2"===e.activeName?e.columns():e.columns2(),"show-summary":!1,total:e.userTotal,"has-pagination":"","current-page":e.page,"page-size":e.limit,"border-style":!0,"cell-class-name":e.roleCellClassName},on:{handleCurrent:e.handleCurrentChange,handleSize:e.handleSizeChange}},[i("el-tabs",{staticClass:"el-tab-two",on:{"tab-click":e.activeTabChange},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"userMember2",label:"用户"}},[i("div",{staticClass:"blank-content"})]),i("el-tab-pane",{attrs:{name:"groupMember2",label:"岗位"}},[i("div",{staticClass:"blank-content"})])],1)],1)],1)])]),i("simple-dialog",{staticClass:"add-page-form",attrs:{"dialog-title":"userMember2"===e.activeName?"新增用户":"新增岗位：","dialog-visible":e.dialogVisible,"save-text":"确 定","cancel-text":"取 消","botton-show":"true","dialog-width":"450px"},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t},saveEmit:e.addToProject,cancelEmit:function(t){e.dialogVisible=!1}}},[i("el-form",{ref:"numberValidateForm",staticClass:"demo-form-inline",attrs:{model:e.params,"label-width":"110px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{prop:"members",rules:[{required:!0,message:"此字段不能为空",trigger:"blur"}],label:"userMember2"===e.activeName?"选择用户：":"选择岗位："}},[i("div",{staticStyle:{width:"100%"}},["userMember2"===e.activeName?i("el-select",{staticStyle:{width:"95%"},attrs:{clearable:"","default-first-option":"",multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.params.members,callback:function(t){e.$set(e.params,"members",t)},expression:"params.members"}},e._l(e.selectedUsers,(function(e){return i("el-option",{key:e.id,attrs:{label:e.username?e.username:e.name,value:e.id}})})),1):i("el-select",{staticStyle:{width:"95%"},attrs:{clearable:"",multiple:"",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:e.params.members,callback:function(t){e.$set(e.params,"members",t)},expression:"params.members"}},e._l(e.selectedUsers,(function(e){return i("el-option",{key:e.id,attrs:{label:e.username?e.username:e.name,value:e.id}})})),1)],1)])],1)],1),e.dialogVisibleDel?i("div",{staticClass:"v-modal",staticStyle:{"z-index":"2006"},attrs:{tabindex:"0"}}):e._e(),e.dialogVisibleDel?i("div",{staticClass:"el-dialog__wrapper",staticStyle:{"z-index":"2007"}},[i("div",{staticClass:"el-dialog el-dialog--center"},[i("div",{staticClass:"el-dialog__body"},[i("div",{staticStyle:{"padding-bottom":"30px"}},[i("i",{staticClass:"el-icon-warning"}),"新增用户"!==e.activeName?i("p",{staticStyle:{"text-align":"center"}},[e._v("是否确认删除“"+e._s(e.rowItem.username)+"”?")]):i("p",{staticStyle:{"text-align":"center"}},[e._v("是否确认删除“"+e._s(e.rowItem.name)+"”?")])]),i("el-button",{on:{click:function(t){e.dialogVisibleDel=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.remove(e.rowItem)}}},[e._v("确 定")])],1)])]):e._e()],1)},o=[],l=(i("a9e3"),i("fd85")),c=i("4b25"),u={name:"AddPage",mixins:[c["a"]],props:{label:{type:String,default:"请选择权限菜单"},addBoolean:{type:Array,default:!1},actionList:{type:Array,default:[]},actionsMenuList:{type:Array,default:[]},menu:{type:Object,default:{}},actions:{type:Array,default:[]},authPage:{type:Function},isShowBtn:{type:Boolean,default:!1},isShowPrivateRegion:{type:Boolean,default:!1},activeName:{type:String,default:!1},userTotal:{type:Number,default:!1},memberList:{type:Array,default:!1},page:{type:Number,default:!1},limit:{type:Number,default:!1}},data:function(){return{rowItem:{},dialogVisibleDel:!1,dialogVisible:!1,params:{region:[],members:[]},parentTitle:"",title:"",selectedUsers:[],copyForm:{fromUser:{id:"",usercode:""},toUser:[],authType:["0"]},copyVisible:!1,userData:[],keyWord:"",allActionsInfo:[],regionRules:[],columns:function(){return[{align:"center",label:"序号",width:"70",type:"index"},{prop:"username",label:"姓名","header-align":"left",showOverflowTooltip:!0,"min-width":"100"},{prop:"deptName",label:"部门","header-align":"left",showOverflowTooltip:!0,"min-width":"160"},{prop:"email",label:"邮箱","header-align":"left",showOverflowTooltip:!0,"min-width":"160"}]},columns2:function(){return[{align:"center",label:"序号",width:"70",type:"index"},{prop:"name",label:"岗位名","header-align":"left",showOverflowTooltip:!0,"min-width":"160"},{prop:"description",label:"岗位描述","header-align":"left",showOverflowTooltip:!0,"min-width":"200"}]}}},created:function(){this.actionList=this.actions,this.menu&&this.menu.id&&!this.memberList.length&&this.activeTabChange()},watch:{menu:function(){this.activeTabChange()}},methods:{showRoleDel:function(e){var t=event||window.event;t.stopPropagation(),this.rowItem=e,this.dialogVisibleDel=!0},activeTabChange:function(){var e=this;this.$emit("update:page",1),this.$emit("update:activeName",this.activeName),this.$nextTick((function(){"userMember2"===e.activeName?e.queryusers():e.querygroups()}))},checkTab:function(){return"userMember2"===this.activeName?0:1},handleSizeChange:function(e){var t=this;this.$emit("update:page",1),this.$emit("update:limit",e),this.$nextTick((function(){0===t.checkTab()?t.queryusers():t.querygroups()}))},handleCurrentChange:function(e){var t=this;this.$emit("update:page",e),this.$nextTick((function(){0===t.checkTab()?t.queryusers():t.querygroups()}))},doQuery:function(){this.page=1,this.getUsers()},addToProject:function(){var e=this;this.$refs.numberValidateForm.validate((function(t){if(!t)return!1;e.dialogVisible=!1;var i={identity:e.checkTab(),members:e.params.members,regionIds:e.params.region};Object(l["a"])(e.menu.id,i).then((function(t){var i=t.error;i?e.$message.error({title:"操作失败",message:i.message}):(e.$message.success({title:"操作成功",message:"加入成员成功"}),e.userMembers=[],e.keySearch())}))}))},keySearch:function(){this.page=1,0===this.checkTab()?this.queryusers():this.querygroups()},init:function(){var e=this,t={},i=this.$store.state.user.userInfo.id;t.userId=i,Object(l["B"])(t).then((function(t){var i=t.data;i&&(e.selectedUsers=i.rows)}))},initGroup:function(){var e=this;Object(l["E"])().then((function(t){var i=t.data;i&&(e.selectedUsers=i.rows)}))},queryusers:function(e){var t=this,i={page:this.page,limit:this.limit};""!==this.keyWord&&(i.queryStr=this.keyWord),this.loading=!0,Object(l["r"])(this.menu.id,i).then((function(e){t.loading=!1,e.data&&(t.$emit("update:memberList",e.data.rows),t.$emit("update:userTotal",e.data.total))}))},querygroups:function(){var e=this,t={page:this.page,limit:this.limit};""!==this.keyWord&&(t.queryStr=this.keyWord),this.loading=!0,Object(l["K"])(this.menu.id,t).then((function(t){e.loading=!1,t.data&&(e.$emit("update:memberList",t.data.rows),e.$emit("update:userTotal",t.data.total))}))},remove:function(e){var t=this,i={members:[e.id],identity:this.checkTab()};Object(l["i"])(this.menu.id,i).then((function(i){var n=i.error;n?t.$message.success({title:"删除失败",message:n.message}):(t.$message.success({title:"删除成功;",message:"删除成功;"}),t.dialogVisibleDel=!1,Object(l["getDelUserMsg"])(e.id,{menuId:t.menu.id}).then((function(i){var n=i.data;if(n.groupVos&&n.groupVos.length>0){var a="";n.groupVos.forEach((function(e){a=a+e.name+"、"})),a=a.substr(0,a.length-1),t.$notify({title:"提示",type:"warning",message:"".concat(e.username,"在用户组：").concat(a,"中还存在“").concat(t.menu.title,"”菜单的权限"),duration:0})}setTimeout((function(){if(n.roleVos&&n.roleVos.length>0){var i="";n.roleVos.forEach((function(e){i=i+e.name+"、"})),i=i.substr(0,i.length-1),t.$notify({title:"提示",type:"warning",message:"".concat(e.username,"在角色：").concat(i,"中还存在“").concat(t.menu.title,"”菜单的权限"),duration:0})}}),100)})),0===t.checkTab()?t.queryusers():t.querygroups(),t.dialogVisibleDel=!1)}))},findTitle:function(e){var t=this;e.map((function(e){e.id===t.menu.id?t.title=t.menu.title:e.children&&e.children.length>0&&(t.parentTitle=e.title+"> ",e.children.map((function(i){i.id===t.menu.id?t.title=t.parentTitle+t.menu.title:i.children&&i.children.length>0&&(t.parentTitle+=i.title+">",i.children.map((function(e){e.id===t.menu.id&&(t.title=t.parentTitle+t.menu.title)})),t.parentTitle=e.title+"> ")})))}))},menuquery:function(){var e=this;Object(l["queryMenus"])().then((function(t){var i=t.data;i&&i.length>0&&e.findTitle(i)}))},addBtn:function(){this.dialogVisible=!0,"userMember2"===this.activeName?this.init():"groupMember2"===this.activeName&&this.initGroup()},strTooltip:function(e,t){var i="";return e.forEach((function(e,n){t.forEach((function(t,n){e===t.id&&(""!==i&&(i+="；"),i+="".concat(t.name))}))})),i}}},d=u,h=(i("bd946"),i("1cd2"),i("2877")),m=Object(h["a"])(d,r,o,!1,null,"c776e4d6",null),f=m.exports,p=i("d547"),g=i("32bb"),v=i("579d"),b=Object(v["a"])(["trees","menu","activeName","memberList","page","limit","userTotal","menuTreeStr"]);function y(e,t){var i=[];return t.forEach((function(t){var n=t.meta;if(n&&n.authority&&!n.hidden&&!(t.path.indexOf("home")>-1||t.path.indexOf("dynamicPage")>-1)){var a={};if(a.code=n.authority,a.title=n.title,a.icon=n.icon,n.href&&(a.href=n.href),t.children){var s=y(a.code,t.children);s.length>0&&(a.children=s)}else{var r=""!==e?"".concat(e,"_"):"";n.actions?a.actions=n.actions.map((function(e){return{describe:e.name,regionVoList:[{code:"".concat(r).concat(a.code,":").concat(e.code),name:e.name}]}})):e&&(a.actions=[{describe:"查看",regionVoList:[{code:"".concat(e,"_").concat(a.code,":query"),name:"查看"}]}])}i.push(a)}})),i}var w={name:"MenuDetail",mixins:[b],components:{addPage:f},data:function(){return{isEdit:[],editTitleStr:"",label:"未获取到菜单管理列表",showData:{},showHtml:!1,addBoolean:!1,noTitle:!0,visible:!1,isShowPrivateRegion:!1,menuTreeStr:"",editTitle:"编辑菜单",trees:[],defaultProps:{children:"children",label:"title"},editContent:{id:"",title:"",url:""},menus:[],actionFlag:{},defaultProExpands:[],opering:!1,menu:[],actionsMenuList:[],actionList:[],isShowBtn:!1,isOne:!0,activeName:"userMember2",memberList:[],userTotal:0,page:1,limit:10}},created:function(){if(this.trees.length)if(this.menu)!this.memberList&&this.authPage(this.menu),this.label=this.menu.title;else{var e=this.trees[0].children[0];e.children&&e.children.length>0&&(e=e.children[0]),!this.memberList&&this.authPage(e),this.label=e.title}else this.menuquery();this.menuTreeStr&&this.$refs.menuTree.filter(this.menuTreeStr)},beforeRouteLeave:function(e,t,i){this.cacheParamData(),i()},watch:{menuTreeStr:function(e){this.$refs.menuTree.filter(e)}},methods:{stopPropagationEvent:function(e,t,i){e=e||window.event,e.stopPropagation(),this.isShowBtn=!0,this.label=i,"object"===Object(s["a"])(t.children)&&t.children.length>=0?this.addBoolean=!0:this.addBoolean=!1;var n=e.target;this.showHtml&&(this.showHtml.className="el-tree-node__content");for(var a=0;a<10;a++)n=n.parentNode,"el-tree-node__content"===n.className&&(n.className="el-tree-node__content isShowAca",this.showHtml=n,a=10)},handleActionsChange:function(e,t,i){if(t){if(!e.children)if(this.menus.push(e.id),this.opering)this.opering=!1;else{var n=[];e.actions&&(e.actions.forEach((function(e){return n.push(e.id)})),this.actionFlag["menu_".concat(e.id)]=n)}}else{var a=this.menus.indexOf(e.id);a>-1&&(this.menus.splice(a,1),this.opering?this.opering=!1:this.actionFlag["menu_".concat(e.id)]=[])}},filterNode:function(e,t){return!e||-1!==t.title.indexOf(e)},editTitleTwo:function(e){this.visible=!0,this.editTitle="编辑菜单",this.id=e.id,this.editContent={id:e.id,title:e.title,url:e.url}},authPage:function(e){if(this.page=1,!(e.children&&e.children.length>0))if(e.children&&!e.actions?this.isShowPrivateRegion=!1:this.isShowPrivateRegion=!0,e&&e.actions&&e.actions.length>0){var t=[];e.actions.forEach((function(e){t.push(e.id)}));var i=Object(p["a"])(t,this.actionList);this.menu=e,this.actions=i,this.actionsMenuList=e.actions}else this.menu=e,this.actionsMenuList=[]},submitSave:function(){var e=this;""===this.editContent.title||""===this.editContent.title.replace(/^\s+|\s+$/g,"")?this.$notify.error({title:"操作失败",message:"操作失败"}):Object(l["editmenuwq"])(this.id,this.editContent.title).then((function(t){var i=t.error;i?e.$notify.error({title:"操作失败",message:i.message}):(e.$notify.success({title:"操作成功",message:"操作成功"}),e.menuquery())})),this.visible=!1},collapse:function(e,t,i){return 1===e.level&&1===t.level||2===e.level&&2===t.level&&e.parent.id===t.parent.id||3===e.level&&3===t.level&&e.parent.id===t.parent.id?"prev"===i||"next"===i:void 0},nodeDrop:function(e,t,i,n){var a=this;Object(l["editoOrder"])(this.trees).then((function(e){var t=e.error;t?a.$notify.error({title:"操作失败",message:t.message}):(a.$notify.success({title:"操作成功",message:"操作成功"}),Object(l["queryMenus"])())}))},init:function(){var e=this;console.log(y("",g["default"])),Object(l["q"])(y("",g["default"])).then((function(t){var i=t.error;i?e.$notify.error({title:"操作失败",message:i.message}):(e.$notify.success("初始化成功"),e.menuquery())}))},handleInitMenu:function(){var e=this;this.$confirm("您确定要初始化系统中的菜单和功能点吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.init()})).catch((function(){}))},menuquery:function(){var e=this;Object(l["s"])().then((function(t){var i=t.data;if(i&&i.length>0&&(e.trees=i,e.isOne)){var n=e.trees[0].children[0];n.children&&n.children.length>0&&(n=n.children[0]),e.authPage(n),e.label=n.title}}))},showMenus:function(e,t,i){var n=i||window.event;n.stopPropagation(),this.isEdit=[],this.editTitleStr=[],this.$set(this.isEdit,[e.$treeNodeId],!0),this.$set(this.editTitleStr,[e.$treeNodeId],e.title)},clearShowEdit:function(){this.isEdit=[],this.editTitleStr=[]},saveEdit:function(e){var t,i=this;if(this.editTitleStr.length&&(t=this.editTitleStr[e.$treeNodeId]),""===t)return this.$message.warning({message:"名称不能为空!"}),!1;var n=e.id,a=function e(t,n){for(var a in t){if(t[a].id===n)return void(i.label=t[a].title);t[a]&&t[a].children&&e(t[a].children)}};Object(l["t"])(n,t).then((function(e){if(e.error)i.$message.error({message:"修改菜单列表未能成功!错误信息是".concat(e.error.message,";")});else{i.$message.success({message:"修改菜单列表成功!正在重新获取最新菜单列表;"}),i.clearShowEdit(),i.authPage(i.menu);var t=i.menu.id;i.menuquery(a,i.trees,t)}})).catch((function(e){i.$message.error({message:"修改菜单列表未能成功!"})}))}}},S=w,C=(i("e981"),Object(h["a"])(S,n,a,!1,null,null,null));t["default"]=C.exports},f183:function(e,t,i){var n=i("d012"),a=i("861d"),s=i("5135"),r=i("9bf2").f,o=i("90e3"),l=i("bb2f"),c=o("meta"),u=0,d=Object.isExtensible||function(){return!0},h=function(e){r(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},m=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,c)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},f=function(e,t){if(!s(e,c)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},p=function(e){return l&&g.REQUIRED&&d(e)&&!s(e,c)&&h(e),e},g=e.exports={REQUIRED:!1,fastKey:m,getWeakData:f,onFreeze:p};n[c]=!0}}]);
//# sourceMappingURL=chunk-5500a826.b3ebde92.js.map