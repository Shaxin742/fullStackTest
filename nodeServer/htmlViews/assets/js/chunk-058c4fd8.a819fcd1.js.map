{"version":3,"sources":["webpack:///./src/views/viewDateManagent/index.vue?bda6","webpack:///./src/mixins/paramCache.js","webpack:///./src/views/viewDateManagent/index.vue?f386","webpack:///./src/views/viewDateManagent/index.vue","webpack:///./src/views/viewDateManagent/index.vue?7d49","webpack:///./src/views/viewDateManagent/index.vue?9216"],"names":["extractProps","paramKeys","sources","target","key","val","cloneDeep","cacheKeys","namespace","keep","computed","moduleName","this","$route","path","cacheParams","$store","state","dataCache","params","methods","mapMutations","cacheParamData","SET_CACHE_PARAMS","recoveryDataParams","created","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","on","handleCommand","_v","staticStyle","gotolink","model","value","callback","$$v","viewName","expression","viewType","_l","item","text","fieldName","updateData","cancelData","viewData","loading","columns","total","page","limit","handleCurrent","handleSize","dialogVisibleData","setDetermines","cancelDialog","radio","staticRenderFns","registerHooks","paramsCacheMixin","viewTypeData","viewStateData","copy","compatibleId","compatible","_this","prop","type","align","label","width","showOverflowTooltip","formatter","viewTypeFormatter","viewStatusFormatter","headerAlign","actions","code","hidden","startShow","onClick","row","startBtn","stopShow","blockShow","disabled","editDisabled","editBook","previewBook","copyBook","deleteDisabled","delBook","status","statusCode","id","then","error","getViewDataList","$message","message","$router","push","command","call","query","isCompatible","$confirm","confirmButtonText","cancelButtonText","catch","column","cellValue","name","kind","data","rows","length","to","from","next","components","mixins","component"],"mappings":"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","file":"assets/js/chunk-058c4fd8.a819fcd1.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","import { mapMutations } from 'vuex';\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\nfunction extractProps(paramKeys, sources, target = {}) {\r\n  /**\r\n   * 从源对象中提取指定属性到目标对象\r\n   * @argument paramKeys 需要提取的属性名称组成的数组\r\n   */\r\n  for (const key of paramKeys) {\r\n    const val = sources[key];\r\n    if (val) {\r\n      if (typeof val === 'object') {\r\n        target[key] = cloneDeep(val);\r\n      } else {\r\n        target[key] = val;\r\n      }\r\n    }\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\n/**\r\n * 组件data临时缓存mixin，用于将组件data中的数据提升到store中\r\n * 比如实现分页查询页面从编辑页返回后显示编辑前的页码\r\n * cacheKeys: 组件中待缓存的data中的属性名，属性值不能是函数\r\n * namespace：命名空间，处理一个路由下有多个组件的情况\r\n * keep：是否保留缓存结果，若为true，则不再阅读之后清除\r\n */\r\nexport default function(cacheKeys, namespace, keep) {\r\n  return {\r\n    computed: {\r\n      moduleName() {\r\n        return `${this.$route.path}${namespace ? '_' + namespace : ''}`;\r\n      },\r\n      cacheParams() {\r\n        return this.$store.state.dataCache.params[this.moduleName];\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations(['SET_CACHE_PARAMS']),\r\n      cacheParamData() {\r\n        /**\r\n         * 缓存组件data中的数据\r\n         */\r\n        this.SET_CACHE_PARAMS({\r\n          moduleName: this.moduleName,\r\n          params: extractProps(cacheKeys, this)\r\n        });\r\n      },\r\n      recoveryDataParams() {\r\n        /**\r\n         * 恢复组件data中被缓存的参数,如果不传，则默认使用cacheParamKeys\r\n         */\r\n        if (this.cacheParams) {\r\n          //  直接提取缓存对象中的参数到组件data中\r\n          extractProps(cacheKeys, this.cacheParams, this);\r\n          //  阅后即焚\r\n          if (!keep) {\r\n            this.SET_CACHE_PARAMS({\r\n              moduleName: this.moduleName\r\n            });\r\n          }\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.recoveryDataParams();\r\n    }\r\n  };\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view-data-manage\"},[_c('base-panel',{attrs:{\"title\":\"数据视图管理\"}},[_c('template',{slot:\"title-right\"},[_c('el-dropdown',{on:{\"command\":_vm.handleCommand}},[_c('div',[_c('el-button',{staticClass:\"icon_button\"},[_c('span',[_c('svg-icon',{staticClass:\"icon\",attrs:{\"icon-class\":\"add-line\"}}),_vm._v(\"新增\")],1)])],1),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"dataBase\"}},[_vm._v(\"数据库型\")]),_c('el-dropdown-item',{attrs:{\"command\":\"httpService\"}},[_vm._v(\"http服务型\")]),_c('el-dropdown-item',{attrs:{\"command\":\"fileType\"}},[_vm._v(\"文件型\")]),_c('el-dropdown-item',{attrs:{\"command\":\"customType\"}},[_vm._v(\"自定义型\")])],1)],1),_c('el-button',{staticClass:\"icon_button\",staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.gotolink}},[_c('span',[_c('svg-icon',{staticClass:\"icon\",attrs:{\"icon-class\":\"link-line\"}}),_vm._v(\"连接器管理\")],1)])],1),_c('div',{staticClass:\"operate-left\"},[_c('el-form',{staticClass:\"operate-left-form\",attrs:{\"inline\":true,\"label-suffix\":\" :\",\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"视图名称\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入视图名称\"},model:{value:(_vm.viewName),callback:function ($$v) {_vm.viewName=$$v},expression:\"viewName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"视图类型\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择视图类型\"},model:{value:(_vm.viewType),callback:function ($$v) {_vm.viewType=$$v},expression:\"viewType\"}},_vm._l((_vm.viewTypeData),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.text,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"字段名称\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入字段名称\"},model:{value:(_vm.fieldName),callback:function ($$v) {_vm.fieldName=$$v},expression:\"fieldName\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateData}},[_vm._v(\"搜索\")]),_c('el-button',{on:{\"click\":_vm.cancelData}},[_vm._v(\"重置\")])],1)],1)],1),_c('base-table',{staticClass:\"sortTable noTableBorder\",attrs:{\"border\":\"\",\"data-source\":_vm.viewData,\"loading\":_vm.loading,\"height\":360,\"columns\":_vm.columns(),\"has-pagination\":\"\",\"show-summary\":false,\"total\":_vm.total,\"current-page\":_vm.page,\"page-size\":_vm.limit,\"border-style\":true,\"can-edit\":\"\"},on:{\"handleCurrent\":_vm.handleCurrent,\"handleSize\":_vm.handleSize}})],2),_c('simple-dialog',{attrs:{\"dialog-title\":\"修改\",\"dialog-visible\":_vm.dialogVisibleData,\"dialog-width\":\"300px\",\"botton-show\":\"true\",\"cancel-text\":\"取消\",\"save-text\":\"确定\"},on:{\"saveEmit\":_vm.setDetermines,\"cancelEmit\":_vm.cancelDialog}},[_c('el-radio',{attrs:{\"label\":\"0\"},model:{value:(_vm.radio),callback:function ($$v) {_vm.radio=$$v},expression:\"radio\"}},[_vm._v(\"兼容性\")]),_c('el-radio',{attrs:{\"label\":\"1\"},model:{value:(_vm.radio),callback:function ($$v) {_vm.radio=$$v},expression:\"radio\"}},[_vm._v(\"非兼容性\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport { viewDataQuery, statusChange, deleteViewData } from '@api/viewData';\r\nimport { arrayFind } from '@utils/util';\r\nimport paramsCache from '@mixins/paramCache';\r\n\r\ndeclare module 'vue/types/vue' {\r\n  interface Vue {\r\n    [key: string]: any;\r\n  }\r\n}\r\n\r\nComponent.registerHooks(['beforeRouteLeave']);\r\nconst paramsCacheMixin = paramsCache([\r\n  'viewName',\r\n  'viewType',\r\n  'fieldName',\r\n  'viewData',\r\n  'total',\r\n  'limit',\r\n  'page'\r\n]);\r\n@Component({\r\n  components: {},\r\n  mixins: [paramsCacheMixin]\r\n})\r\nexport default class ViewDateManagent extends Vue {\r\n  private viewData: Array<any> = [];\r\n  private viewTypeData: Array<any> = [\r\n    {\r\n      text: '数据库型',\r\n      value: 0\r\n    },\r\n    {\r\n      text: 'http服务型',\r\n      value: 1\r\n    },\r\n    {\r\n      text: '文件型',\r\n      value: 2\r\n    },\r\n    {\r\n      text: '自定义型',\r\n      value: 3\r\n    }\r\n  ];\r\n  private viewStateData: Array<any> = [\r\n    {\r\n      text: '未启用',\r\n      value: 1\r\n    },\r\n    {\r\n      text: '已启用',\r\n      value: 0\r\n    },\r\n    {\r\n      text: '已过期',\r\n      value: 2\r\n    },\r\n    {\r\n      text: '已停用',\r\n      value: 3\r\n    }\r\n  ];\r\n  private viewName = '';\r\n  private viewType = '';\r\n  private copy = false;\r\n  private fieldName = '';\r\n  private loading = false;\r\n  private page = 1;\r\n  private limit = 10;\r\n  private total = 0;\r\n  private compatibleId = '';\r\n  private compatible = 0;\r\n  private dialogVisibleData = false;\r\n  private radio = '0';\r\n  columns() {\r\n    const _this = this;\r\n    return [\r\n      {\r\n        prop: '',\r\n        type: 'index',\r\n        align: 'center',\r\n        label: '序号',\r\n        width: '60'\r\n      },\r\n      {\r\n        prop: 'name',\r\n        label: '视图名称',\r\n        'header-align': 'left',\r\n        showOverflowTooltip: true,\r\n        'min-width': '100'\r\n      },\r\n      {\r\n        prop: 'type',\r\n        label: '视图类型',\r\n        'header-align': 'left',\r\n        showOverflowTooltip: true,\r\n        'min-width': '120',\r\n        formatter: _this.viewTypeFormatter\r\n      },\r\n      {\r\n        prop: 'status',\r\n        label: '视图状态',\r\n        'header-align': 'left',\r\n        showOverflowTooltip: true,\r\n        'min-width': '80',\r\n        formatter: _this.viewStatusFormatter\r\n      },\r\n      {\r\n        prop: '',\r\n        align: 'center',\r\n        label: '操作',\r\n        width: '290',\r\n        headerAlign: 'center',\r\n        actions: [\r\n          {\r\n            code: 'startUsing',\r\n            text: '启用',\r\n            hidden: _this.startShow,\r\n            onClick: (row) => _this.startBtn(row, 0)\r\n          },\r\n          {\r\n            code: 'pastDue',\r\n            text: '过期',\r\n            hidden: _this.stopShow,\r\n            onClick: (row) => _this.startBtn(row, 2)\r\n          },\r\n          {\r\n            code: 'blockUp',\r\n            text: '停用',\r\n            hidden: _this.blockShow,\r\n            onClick: (row) => _this.startBtn(row, 3)\r\n          },\r\n          {\r\n            code: 'edit',\r\n            text: '修改',\r\n            disabled: _this.editDisabled,\r\n            onClick: _this.editBook\r\n          },\r\n          {\r\n            code: 'preview',\r\n            text: '详情',\r\n            onClick: _this.previewBook\r\n          },\r\n          {\r\n            code: 'edit',\r\n            text: '复制',\r\n            onClick: _this.copyBook\r\n          },\r\n          {\r\n            code: 'delete',\r\n            text: '删除',\r\n            disabled: _this.deleteDisabled,\r\n            onClick: _this.delBook\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n  //视图状态status:0启用，1未启用，2已过期，3已停用\r\n  //当前状态是【未启用】，则只添加【启用】按钮。如果状态是【已启用】，则增加【停止，过期】，若当前状态是【已过期】，则增加【停用】按钮,还有一个状态叫已停用,按钮隐藏\r\n  //停止对应的是未启用\r\n\r\n  //显示启用按钮\r\n  startShow(row: any) {\r\n    // console.log(row.status)\r\n    //未启用状态1对应==>启用按钮\r\n    if (row.status === 1) {\r\n      return false; //显示\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  stopShow(row: any) {\r\n    //已启用状态0对应==>停止、过期按钮\r\n    if (row.status === 0) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  blockShow(row: any) {\r\n    //已过期状态2对应==>停用按钮\r\n    if (row.status === 2) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  startBtn(row: any, statusCode) {\r\n    statusChange(row.id, statusCode).then(({ error }) => {\r\n      if (!error) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '状态转换成功!'\r\n        });\r\n        this.getViewDataList();\r\n      } else {\r\n        this.getViewDataList();\r\n        this.$message.error('状态转换失败：' + error.message);\r\n      }\r\n    });\r\n  }\r\n  // 修改禁选\r\n  editDisabled(row: any) {\r\n    if (row.status === 2) {\r\n      return true;\r\n    }\r\n  }\r\n  // 搜索\r\n  updateData() {\r\n    this.page = 1;\r\n    this.getViewDataList();\r\n  }\r\n  // 取消\r\n  cancelData() {\r\n    this.viewName = '';\r\n    this.viewType = '';\r\n    this.fieldName = '';\r\n    this.getViewDataList();\r\n  }\r\n  // 删除禁选\r\n  deleteDisabled(row: any) {\r\n    if (row.status !== 1) {\r\n      return true;\r\n    }\r\n  }\r\n  // 连接器管理\r\n  gotolink() {\r\n    this.$router.push('/sysSupport/dataService/connector');\r\n  }\r\n  handleCommand(command: string) {\r\n    this[command].call();\r\n  }\r\n  dataBase() {\r\n    this.$router.push('/sysSupport/dataService/dataBaseView');\r\n  }\r\n  httpService() {\r\n    this.$router.push('/sysSupport/dataService/httpView');\r\n  }\r\n  fileType() {\r\n    this.$router.push('/sysSupport/dataService/fileView');\r\n  }\r\n  customType() {\r\n    this.$router.push('/sysSupport/dataService/customView');\r\n  }\r\n  // 修改选择\r\n  editBook(row: any) {\r\n    this.compatible = row.type;\r\n    this.compatibleId = row.id;\r\n    this.dialogVisibleData = true;\r\n  }\r\n  cancelDialog() {\r\n    this.dialogVisibleData = false;\r\n  }\r\n  // 修改 - 确定\r\n  setDetermines() {\r\n    if (this.compatible === 0) {\r\n      if (this.copy === true) {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/dataBaseView',\r\n          query: { id: this.compatibleId, isCompatible: '3' }\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/dataBaseView',\r\n          query: { id: this.compatibleId, isCompatible: this.radio }\r\n        });\r\n      }\r\n    } else if (this.compatible === 1) {\r\n      if (this.copy === true) {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/httpView',\r\n          query: { id: this.compatibleId, isCompatible: '3' }\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/httpView',\r\n          query: { id: this.compatibleId, isCompatible: this.radio }\r\n        });\r\n      }\r\n    } else if (this.compatible === 2) {\r\n      if (this.copy === true) {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/fileView',\r\n          query: { id: this.compatibleId, isCompatible: '3' }\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/fileView',\r\n          query: { id: this.compatibleId, isCompatible: this.radio }\r\n        });\r\n      }\r\n    } else if (this.compatible === 3) {\r\n      if (this.copy === true) {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/customView',\r\n          query: { id: this.compatibleId, isCompatible: '3' }\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          path: '/sysSupport/dataService/customView',\r\n          query: { id: this.compatibleId, isCompatible: this.radio }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  copyBook(row: any) {\r\n    this.copy = true;\r\n    this.compatible = row.type;\r\n    this.compatibleId = row.id;\r\n    this.setDetermines();\r\n  }\r\n  delBook(row: any) {\r\n    const params = {\r\n      id: row.id\r\n    };\r\n    this.$confirm('您确定要删除这条记录?', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n      .then(() => {\r\n        deleteViewData(params).then(({ error }) => {\r\n          if (!error) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '删除成功!'\r\n            });\r\n            this.getViewDataList();\r\n          } else {\r\n            this.$message.error('删除失败: ' + error.message);\r\n          }\r\n        });\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n  }\r\n  previewBook(row: any) {\r\n    this.$router.push({\r\n      path: '/sysSupport/dataService/detailData',\r\n      query: { id: row.id }\r\n    });\r\n  }\r\n  viewTypeFormatter(\r\n    row: object,\r\n    column: object,\r\n    cellValue: number\r\n    // index: number\r\n  ) {\r\n    return arrayFind(this.viewTypeData, 'value', cellValue).text;\r\n  }\r\n  viewStatusFormatter(row: object, column: object, cellValue: number) {\r\n    if (arrayFind(this.viewStateData, 'value', cellValue)) {\r\n      return arrayFind(this.viewStateData, 'value', cellValue).text;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n  // 分页\r\n  handleSize(val: number) {\r\n    this.limit = val;\r\n    this.page = 1;\r\n    this.getViewDataList();\r\n  }\r\n  handleCurrent(val: number) {\r\n    this.page = val;\r\n    this.getViewDataList();\r\n  }\r\n  // 数据查询\r\n  getViewDataList() {\r\n    this.loading = true;\r\n    const params = {\r\n      type: '0',\r\n      limit: this.limit,\r\n      page: this.page,\r\n      name: this.viewName,\r\n      kind: `${this.viewType}`,\r\n      fieldName: this.fieldName\r\n    };\r\n    viewDataQuery(params).then(({ data, error }) => {\r\n      if (!error) {\r\n        if (data.rows) {\r\n          this.viewData = data.rows;\r\n        }\r\n        this.total = data.total;\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n  // 数据初始化\r\n  created() {\r\n    !this.viewData.length && this.getViewDataList();\r\n  }\r\n\r\n  beforeRouteLeave(to, from, next) {\r\n    this.cacheParamData();\r\n    next();\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=07c07c28&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}