(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dec07b2"],{"06c4":function(e,t,a){},"579d":function(e,t,a){"use strict";a("99af");var i=a("5530"),n=a("53ca"),s=a("b85c"),o=a("2f62"),r=a("0644"),c=a.n(r);function l(e,t){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(s["a"])(e);try{for(o.s();!(a=o.n()).done;){var r=a.value,l=t[r];l&&("object"===Object(n["a"])(l)?i[r]=c()(l):i[r]=l)}}catch(u){o.e(u)}finally{o.f()}return i}t["a"]=function(e,t,a){return{computed:{moduleName:function(){return"".concat(this.$route.path).concat(t?"_"+t:"")},cacheParams:function(){return this.$store.state.dataCache.params[this.moduleName]}},methods:Object(i["a"])(Object(i["a"])({},Object(o["d"])(["SET_CACHE_PARAMS"])),{},{cacheParamData:function(){this.SET_CACHE_PARAMS({moduleName:this.moduleName,params:l(e,this)})},recoveryDataParams:function(){this.cacheParams&&(l(e,this.cacheParams,this),a||this.SET_CACHE_PARAMS({moduleName:this.moduleName}))}}),created:function(){this.recoveryDataParams()}}}},"85af":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"servicePush"},[a("base-table-panel",{staticClass:"sortTable noTableBorder pushTable",attrs:{title:"数据推送服务","right-btns":e.actions(),"data-source":e.pushServiceData,loading:e.loading,height:360,columns:e.columns(),"has-pagination":"","show-summary":!1,total:e.total,"current-page":e.page,"page-size":e.limit,"border-style":!0,"can-edit":""},on:{handleCurrent:e.handleCurrent,handleSize:e.handleSize}},[a("template",{slot:"operate-left"},[a("el-form",{staticClass:"operate-left-form",attrs:{inline:!0,"label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"服务名称"}},[a("el-input",{attrs:{placeholder:"请输入视图名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seathData(t)}},model:{value:e.serviceName,callback:function(t){e.serviceName=t},expression:"serviceName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.seathData}},[e._v("搜索")]),a("el-button",{on:{click:e.updateData}},[e._v("重置")])],1)],1)],1)],2),a("simple-dialog",{attrs:{"dialog-title":"修改","dialog-visible":e.dialogVisibleData,"dialog-width":"300px","botton-show":"true","cancel-text":"取消","save-text":"确定"},on:{saveEmit:e.setDetermines,cancelEmit:e.cancelDialog}},[a("el-radio",{attrs:{label:"0"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("兼容性")]),a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("非兼容性")])],1)],1)},n=[],s=a("d4ec"),o=a("bee2"),r=a("262e"),c=a("2caf"),l=a("9ab4"),u=a("60a3"),h=a("cb9b"),d=a("579d"),p=a("ca00");u["a"].registerHooks(["beforeRouteLeave"]);var v=Object(d["a"])(["page","limit","total","pushServiceData","serviceName"]),m=function(e){Object(r["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.pushServiceData=[],e.serviceName="",e.loading=!1,e.page=1,e.limit=10,e.total=10,e.copy=!1,e.quoteData=[],e.compatibleId="",e.compatible=0,e.dialogVisibleData=!1,e.radio="0",e.viewStateData=[{text:"未启用",value:1},{text:"已启用",value:0},{text:"已过期",value:2},{text:"已停用",value:3}],e}return Object(o["a"])(a,[{key:"columns",value:function(){var e=this;return[{prop:"",label:"",type:"index",align:"center","min-width":"60"},{prop:"name",label:"服务名称","header-align":"left",showOverflowTooltip:!0,"min-width":"100"},{prop:"status",align:"center",label:"服务状态",showOverflowTooltip:!0,"min-width":"80",formatter:e.viewStatusFormatter},{prop:"",align:"center",label:"操作",width:"290",headerAlign:"center",actions:[{code:"startUsing",text:"启用",hidden:e.startShow,onClick:function(t){return e.startBtn(t,0)}},{code:"pastDue",text:"过期",hidden:e.stopShow,onClick:function(t){return e.startBtn(t,2)}},{code:"blockUp",text:"停用",hidden:e.blockShow,onClick:function(t){return e.startBtn(t,3)}},{code:"edit",text:"修改",disabled:e.editDisabled,onClick:e.editBook},{code:"preview",text:"详情",onClick:e.previewBook},{code:"edit",text:"复制",onClick:e.copyBook},{code:"delete",text:"删除",disabled:e.deleteDisabled,onClick:e.deletePush}]}]}},{key:"actions",value:function(){var e=this;return[{icon:"add-line",onClick:e.goHttp,type:"",title:"新增"},{icon:"link-line",onClick:e.gotolink,type:"",title:"连接器管理"}]}},{key:"startShow",value:function(e){return 1!==e.status}},{key:"stopShow",value:function(e){return 0!==e.status}},{key:"blockShow",value:function(e){return 2!==e.status}},{key:"startBtn",value:function(e,t){var a=this;Object(h["q"])(e.id,t).then((function(e){var t=e.error;t?(a.pushServiceList(),a.$message.error("状态转换失败："+t.message)):(a.$message({type:"success",message:"状态转换成功!"}),a.pushServiceList())}))}},{key:"created",value:function(){!this.pushServiceData.length&&this.pushServiceList()}},{key:"beforeRouteLeave",value:function(e,t,a){this.cacheParamData(),a()}},{key:"gotolink",value:function(){this.$router.push("/sysSupport/dataService/connector")}},{key:"editDisabled",value:function(e){if(2===e.status)return!0}},{key:"deleteDisabled",value:function(e){if(1!==e.status)return!0}},{key:"editBook",value:function(e){this.compatible=e.kind,this.compatibleId=e.id,this.dialogVisibleData=!0}},{key:"previewBook",value:function(e){this.$router.push({path:"detailData",query:{id:e.id}})}},{key:"copyBook",value:function(e){this.copy=!0,this.compatible=e.kind,this.compatibleId=e.id,this.setDetermines()}},{key:"pushServiceList",value:function(){var e=this;this.loading=!0;var t={limit:this.limit,page:this.page,name:this.serviceName,type:1};Object(h["u"])(t).then((function(t){t.error?e.$message.error(t.error.message):(e.loading=!1,e.pushServiceData=t.data.rows,e.total=t.data.total)}))}},{key:"deletePush",value:function(e){var t=this,a={id:e.id};this.$confirm("您确定要删除这条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(h["i"])(a).then((function(e){var a=e.error;a?t.$message.error(a.message):(t.$message({type:"success",message:"删除成功!"}),t.pushServiceList())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},{key:"updateData",value:function(){this.serviceName=""}},{key:"seathData",value:function(){this.pushServiceList()}},{key:"cancelDialog",value:function(){this.dialogVisibleData=!1}},{key:"goHttp",value:function(){this.$router.push("httpPushService")}},{key:"viewStatusFormatter",value:function(e,t,a){return Object(p["a"])(this.viewStateData,"value",a)?Object(p["a"])(this.viewStateData,"value",a).text:""}},{key:"setDetermines",value:function(){!0===this.copy?this.$router.push({path:"httpPushService",query:{id:this.compatibleId}}):this.$router.push({path:"httpPushService",query:{id:this.compatibleId,isCompatible:this.radio}})}},{key:"handleSize",value:function(e){this.limit=e,this.page=1,this.pushServiceList()}},{key:"handleCurrent",value:function(e){this.page=e,this.pushServiceList()}}]),a}(u["e"]);m=Object(l["a"])([Object(u["a"])({mixins:[v]})],m);var f=m,b=f,k=(a("c872"),a("2877")),y=Object(k["a"])(b,i,n,!1,null,null,null);t["default"]=y.exports},c872:function(e,t,a){"use strict";var i=a("06c4"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-4dec07b2.34268c84.js.map